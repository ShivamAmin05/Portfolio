import{S as lr,C as cr,R as ur,B as Ge,y as dr,P as Ee,O as De,W as Rt,a as be,b as fr,c as En,d as hr,A as pr,e as mr,V as ue,E as Ln,f as q,g as gr,h as vr,M as Qe,i as qt,I as Cn,j as Ft,k as Zt,T as ke,l as $t,U as yt,m as yr,n as Rn,o as at,L as wr,p as On,q as br,r as In,D as kn,s as xr,t as ze,Q as xt,u as ln,v as $e,w as Ve,F as cn,x as Ot,z as Ar,G as _r,H as un,J as Tr,K as Mr,N as Pr,X as jn,Y as Fe,Z as At,_ as Sr,$ as Er,a0 as Lr,a1 as Be,a2 as Cr,a3 as Dn,a4 as Rr,a5 as Or,a6 as Bn,a7 as Nn,a8 as zt,a9 as dn,aa as Ir,ab as It,ac as kr,ad as Un,ae as jr,af as Dr,ag as Br,ah as Nr,ai as Ur,aj as Fr,ak as kt,al as zr,am as Fn,an as Hr,ao as Vr,ap as Gr,aq as Ht,ar as zn,as as Kr,at as Xr,au as Wr,av as Yr,aw as qr,ax as Zr,ay as $r,az as Jr,aA as Qr,aB as fn,aC as eo,aD as to}from"./three-C6hVtAam.js";import{r as pe,c as no,d as et,s as tt,u as Hn,g as hn,a as he,o as ro,w as We,b as nt,e as rt,n as oo,f as ao,h as io,i as so,p as Vt,j as pn,k as Ke,l as it,m as lo,F as co,q as uo,t as fo,v as Q,x as Vn,y as Gn,z as ho,A as po,B as ft,C as mo,D as go,E as vo}from"./@vue-RmxtHE6-.js";import{u as yo,c as ot,t as fe,a as wo,b as bo,d as xo,e as Ao,f as _o,g as To}from"./@vueuse-bXC1D-UD.js";import"./tweakpane-VCtAbtq0.js";const Mo=({sizes:s,scene:n})=>{const e=pe([]),t=he(()=>e.value[0]),r=(i,u=!1)=>{e.value.some(({uuid:f})=>f===i.uuid)||(u?o(i):e.value.push(i))},a=i=>{e.value=e.value.filter(({uuid:u})=>u!==i.uuid)},o=i=>{const u=i instanceof fr?i:e.value.find(p=>p.uuid===i);if(!u)return;const f=e.value.filter(({uuid:p})=>p!==u.uuid);e.value=[u,...f]};return Ke(()=>{s.aspectRatio.value&&e.value.forEach(i=>{i instanceof Ee&&(i.aspect=s.aspectRatio.value),(i instanceof Ee||i instanceof De)&&i.updateProjectionMatrix()})}),n.userData.tres__registerCamera=r,n.userData.tres__deregisterCamera=a,it(()=>{e.value=[]}),{camera:t,cameras:e,registerCamera:r,deregisterCamera:a,setCameraActive:o}},Kn=ot(),Xn=ot(),Jt=ot(),Je=new cr;let wt=0,bt=0;const{pause:Po,resume:So,isActive:Eo}=yo(()=>{Kn.trigger({delta:wt,elapsed:bt,clock:Je}),Xn.trigger({delta:wt,elapsed:bt,clock:Je}),Jt.trigger({delta:wt,elapsed:bt,clock:Je})},{immediate:!1});Jt.on(()=>{wt=Je.getDelta(),bt=Je.getElapsedTime()});const Tt=()=>({onBeforeLoop:Kn.on,onLoop:Xn.on,onAfterLoop:Jt.on,pause:Po,resume:So,isActive:Eo}),mn="[TresJS ▲ ■ ●] ";function Mt(){function s(t,r){console.error(`${mn} ${t}`,r||"")}function n(t){console.warn(`${mn} ${t}`)}function e(t,r){}return{logError:s,logWarning:n,logMessage:e}}function Lo(s){return s instanceof be?s:Array.isArray(s)?new be(...s):new be(s)}const Wn=(s,n)=>{for(const e of Object.keys(n))n[e]instanceof Object&&Object.assign(n[e],Wn(s[e],n[e]));return Object.assign(s||{},n),s},Co="html,body,base,head,link,meta,style,title,address,article,aside,footer,header,hgroup,h1,h2,h3,h4,h5,h6,nav,section,div,dd,dl,dt,figcaption,figure,picture,hr,img,li,main,ol,p,pre,ul,a,b,abbr,bdi,bdo,br,cite,code,data,dfn,em,i,kbd,mark,q,rp,rt,ruby,s,samp,small,span,strong,sub,sup,time,u,var,wbr,area,audio,map,track,video,embed,object,param,source,canvas,script,noscript,del,ins,caption,col,colgroup,table,thead,tbody,td,th,tr,button,datalist,fieldset,form,input,label,legend,meter,optgroup,option,output,progress,select,textarea,details,dialog,menu,summary,template,blockquote,iframe,tfoot",Ro=Oo(Co);function gn(s){return s&&s.nodeType===1}function ht(s){return s.replace(/-([a-z])/g,(n,e)=>e.toUpperCase())}function Oo(s,n){const e=Object.create(null),t=s.split(",");for(let r=0;r<t.length;r++)e[t[r]]=!0;return n?r=>!!e[r.toLowerCase()]:r=>!!e[r]}const Io=(s,n)=>{const e=new Set,t=[];for(const r of s){const a=n(r);e.has(a)||(e.add(a),t.push(r))}return t},vn=(s,n)=>{if(!n)return;const e=Array.isArray(n)?n:n.match(/([^[.\]])+/g);return e==null?void 0:e.reduce((t,r)=>t&&t[r],s)},ko=(s,n,e)=>{const t=Array.isArray(n)?n:n.match(/([^[.\]])+/g);t&&t.reduce((r,a,o)=>(r[a]===void 0&&(r[a]={}),o===t.length-1&&(r[a]=e),r[a]),s)};function Yn(s,n){if(gn(s)&&gn(n)){const r=s.attributes,a=n.attributes;return r.length!==a.length?!1:Array.from(r).every(({name:o,value:i})=>n.getAttribute(o)===i)}if(s===n)return!0;if(s===null||typeof s!="object"||n===null||typeof n!="object")return!1;const e=Object.keys(s),t=Object.keys(n);if(e.length!==t.length)return!1;for(const r of e)if(!t.includes(r)||!Yn(s[r],n[r]))return!1;return!0}function jo(s,n){if(!Array.isArray(s)||!Array.isArray(n)||s.length!==n.length)return!1;for(let e=0;e<s.length;e++)if(!Yn(s[e],n[e]))return!1;return!0}const Do=Number.parseInt(En.replace("dev","")),pt={realistic:{shadows:!0,physicallyCorrectLights:!0,outputColorSpace:hr,toneMapping:pr,toneMappingExposure:3,shadowMap:{enabled:!0,type:mr}}};function Bo({scene:s,canvas:n,options:e,disableRender:t,contextParts:{sizes:r,camera:a}}){const o=he(()=>({alpha:fe(e.alpha),depth:fe(e.depth),canvas:xo(n),context:fe(e.context),stencil:fe(e.stencil),antialias:fe(e.antialias)===void 0?!0:fe(e.antialias),precision:fe(e.precision),powerPreference:fe(e.powerPreference),premultipliedAlpha:fe(e.premultipliedAlpha),preserveDrawingBuffer:fe(e.preserveDrawingBuffer),logarithmicDepthBuffer:fe(e.logarithmicDepthBuffer),failIfMajorPerformanceCaveat:fe(e.failIfMajorPerformanceCaveat)})),i=tt(new Rt(o.value));We(o,()=>{i.value.dispose(),i.value=new Rt(o.value)}),Ke(()=>{i.value.setSize(r.width.value,r.height.value)});const{pixelRatio:u}=Ao();Ke(()=>{i.value.setPixelRatio(u.value)});const{logError:f}=Mt(),p=(()=>{const b=new Rt,T={shadowMap:{enabled:b.shadowMap.enabled,type:b.shadowMap.type},toneMapping:b.toneMapping,toneMappingExposure:b.toneMappingExposure,outputColorSpace:b.outputColorSpace};return b.dispose(),T})();Ke(()=>{const b=fe(e.preset);b&&(b in pt||f(`Renderer Preset must be one of these: ${Object.keys(pt).join(", ")}`),Wn(i.value,pt[b]));const T=(C,E)=>{const R=fe(C),j=()=>{if(b)return vn(pt[b],E)};if(R!==void 0)return R;const A=j();return A!==void 0?A:vn(p,E)},g=(C,E)=>ko(i.value,E,T(C,E));g(e.shadows,"shadowMap.enabled"),g(e.toneMapping,"toneMapping"),g(e.shadowMapType,"shadowMap.type"),Do<150&&g(!e.useLegacyLights,"physicallyCorrectLights"),g(e.outputColorSpace,"outputColorSpace"),g(e.toneMappingExposure,"toneMappingExposure");const P=T(e.clearColor,"clearColor");P&&i.value.setClearColor(P?Lo(P):new be(0))});const{pause:h,resume:y,onLoop:M}=Tt();return M(()=>{a.value&&!fe(t)&&i.value.render(s,a.value)}),y(),it(()=>{h(),i.value.dispose(),i.value.forceContextLoss()}),{renderer:i}}const yn=s=>typeof s=="function",No=s=>!!s&&s.constructor===Array;function Uo(s){const n={nodes:{},materials:{}};return s&&s.traverse(e=>{e.name&&(n.nodes[e.name]=e),e.material&&!n.materials[e.material.name]&&(n.materials[e.material.name]=e.material)}),n}async function Fo(s,n,e,t,r){const{logError:a}=Mt(),o=new s;r&&r(o),e&&e(o);const i=(Array.isArray(n)?n:[n]).map(u=>new Promise((f,p)=>{o.load(u,h=>{h.scene&&Object.assign(h,Uo(h.scene)),f(h)},t,h=>p(a("[useLoader] - Failed to load resource",h)))}));return No(n)?await Promise.all(i):await i[0]}const zo=(s,{renderer:n,camera:e,raycaster:t})=>{const r=he(()=>n.value.domElement),{x:a,y:o}=_o({target:r}),{width:i,height:u,top:f,left:p}=To(r),h=({x:_,y:d})=>{if(r.value)return{x:(_-p.value)/i.value*2-1,y:-((d-f.value)/u.value)*2+1}},y=({x:_,y:d})=>{if(e.value)return t.value.setFromCamera(new ue(_,d),e.value),t.value.intersectObjects(s.value,!1)},M=_=>{const d=h({x:(_==null?void 0:_.clientX)??a.value,y:(_==null?void 0:_.clientY)??o.value});return d?y(d)||[]:[]},b=he(()=>M()),T=ot(),g=ot(),P=(_,d)=>{_.trigger({event:d,intersects:M(d)})},C=_=>{P(g,_)};let E;const R=_=>{var d;E=(d=M(_)[0])==null?void 0:d.object},j=_=>{var d;_ instanceof PointerEvent&&E===((d=M(_)[0])==null?void 0:d.object)&&P(T,_)},A=_=>g.trigger({event:_,intersects:[]});return r.value.addEventListener("pointerup",j),r.value.addEventListener("pointerdown",R),r.value.addEventListener("pointermove",C),r.value.addEventListener("pointerleave",A),it(()=>{r!=null&&r.value&&(r.value.removeEventListener("pointerup",j),r.value.removeEventListener("pointerdown",R),r.value.removeEventListener("pointermove",C),r.value.removeEventListener("pointerleave",A))}),{intersects:b,onClick:_=>T.on(_).off,onPointerMove:_=>g.on(_).off}},Ho=({scene:s,contextParts:n})=>{const e=io({click:new Map,pointerMove:new Map,pointerEnter:new Map,pointerLeave:new Map}),t=pe(new Set),r=y=>{t.value.add(y)},a=y=>{t.value.delete(y)},o=y=>{Object.values(e).forEach(M=>M.delete(y)),a(y)},i=y=>{const{onClick:M,onPointerMove:b,onPointerEnter:T,onPointerLeave:g}=y;M&&e.click.set(y,M),b&&e.pointerMove.set(y,b),T&&e.pointerEnter.set(y,T),g&&e.pointerLeave.set(y,g)};s.userData.tres__registerAtPointerEventHandler=i,s.userData.tres__deregisterAtPointerEventHandler=o,s.userData.tres__registerBlockingObjectAtPointerEventHandler=r,s.userData.tres__deregisterBlockingObjectAtPointerEventHandler=a;const u=he(()=>Io([...Array.from(t.value),...Object.values(e).map(y=>Array.from(y.keys())).flat()],({uuid:y})=>y)),{onClick:f,onPointerMove:p}=zo(u,n);f(({intersects:y,event:M})=>{var b;y.length&&((b=e.click.get(y[0].object))==null||b(y[0],M))});let h;return p(({intersects:y,event:M})=>{var b,T,g,P;const C=(b=y==null?void 0:y[0])==null?void 0:b.object,{pointerLeave:E,pointerEnter:R,pointerMove:j}=e;h&&h!==C&&((T=E.get(h))==null||T(h,M)),C&&(h!==C&&((g=R.get(C))==null||g(y[0],M)),(P=j.get(C))==null||P(y[0],M)),h=C||null}),{registerObject:i,deregisterObject:o}},Gt=pe({}),Qt=s=>Object.assign(Gt.value,s);function Vo({scene:s,canvas:n,windowSize:e,disableRender:t,rendererOptions:r}){const a=he(()=>fe(e)?wo():bo(fe(n).parentElement)),o=he(()=>a.value.width.value),i=he(()=>a.value.height.value),u=he(()=>o.value/i.value),f={height:i,width:o,aspectRatio:u},p=tt(s),{camera:h,cameras:y,registerCamera:M,deregisterCamera:b,setCameraActive:T}=Mo({sizes:f,scene:s}),{renderer:g}=Bo({scene:s,canvas:n,options:r,contextParts:{sizes:f,camera:h},disableRender:t}),P={sizes:f,scene:p,camera:h,cameras:so(y),renderer:g,raycaster:tt(new ur),controls:pe(null),extend:Qt,registerCamera:M,setCameraActive:T,deregisterCamera:b};return Vt("useTres",P),P}function qn(){const s=lo("useTres");if(!s)throw new Error("useTresContext must be used together with useTresContextProvider");return s}let ie=null;const{logError:wn}=Mt(),Go={createElement(s,n,e,t){var r,a;if(t||(t={}),t.args||(t.args=[]),s==="template"||Ro(s))return null;let o=s.replace("Tres",""),i;if(s==="primitive"){(t==null?void 0:t.object)===void 0&&wn("Tres primitives need a prop 'object'");const u=t.object;o=u.type,i=Object.assign(u,{type:o,attach:t.attach,primitive:!0})}else{const u=Gt.value[o];u||wn(`${o} is not defined on the THREE namespace. Use extend to add it to the catalog.`),i=new u(...t.args)}return i.isCamera&&(t!=null&&t.position||i.position.set(3,3,3),t!=null&&t.lookAt||i.lookAt(0,0,0)),(t==null?void 0:t.attach)===void 0&&(i.isMaterial?i.attach="material":i.isBufferGeometry&&(i.attach="geometry")),i.isObject3D&&((r=t==null?void 0:t.material)!=null&&r.isMaterial&&(i.userData.tres__materialViaProp=!0),(a=t==null?void 0:t.geometry)!=null&&a.isBufferGeometry&&(i.userData.tres__geometryViaProp=!0)),i.userData={...i.userData,tres__name:o},i},insert(s,n){var e,t,r,a;n&&n.isScene&&(ie=n);const o=n||ie;if(s!=null&&s.isObject3D){if(s!=null&&s.isCamera){if(!(ie!=null&&ie.userData.tres__registerCamera))throw"could not find tres__registerCamera on scene's userData";(t=ie==null?void 0:(e=ie.userData).tres__registerCamera)==null||t.call(e,s)}if(s!=null&&s.onClick||s!=null&&s.onPointerMove||s!=null&&s.onPointerEnter||s!=null&&s.onPointerLeave){if(!(ie!=null&&ie.userData.tres__registerAtPointerEventHandler))throw"could not find tres__registerAtPointerEventHandler on scene's userData";(a=ie==null?void 0:(r=ie.userData).tres__registerAtPointerEventHandler)==null||a.call(r,s)}}s!=null&&s.isObject3D&&o!=null&&o.isObject3D?(o.add(s),s.dispatchEvent({type:"added"})):s!=null&&s.isFog?o.fog=s:typeof(s==null?void 0:s.attach)=="string"&&(s.__previousAttach=s[o==null?void 0:o.attach],o&&(o[s.attach]=s))},remove(s){var n,e;if(s){if(s.isObject3D){const t=s,r=f=>{var p,h;const y=f;f.userData.tres__materialViaProp||(p=y.material)==null||p.dispose(),f.userData.tres__geometryViaProp||(h=y.geometry)==null||h.dispose()},a=ie==null?void 0:ie.userData.tres__deregisterAtPointerEventHandler,o=ie==null?void 0:ie.userData.tres__deregisterBlockingObjectAtPointerEventHandler,i=f=>{var p,h;if(!o)throw"could not find tres__deregisterBlockingObjectAtPointerEventHandler on scene's userData";if((h=ie==null?void 0:(p=ie.userData).tres__deregisterBlockingObjectAtPointerEventHandler)==null||h.call(p,f),!a)throw"could not find tres__deregisterAtPointerEventHandler on scene's userData";(f!=null&&f.onClick||f!=null&&f.onPointerMove||f!=null&&f.onPointerEnter||f!=null&&f.onPointerLeave)&&(a==null||a(f))},u=f=>{const p=ie==null?void 0:ie.userData.tres__deregisterCamera;if(!p)throw"could not find tres__deregisterCamera on scene's userData";f.isCamera&&(p==null||p(f))};t.traverse(f=>{r(f),u(f),i==null||i(f)}),r(t),u(t),i==null||i(t)}(n=s.removeFromParent)==null||n.call(s),(e=s.dispose)==null||e.call(s)}},patchProp(s,n,e,t){var r,a,o,i;if(s){let u=s,f=n;if(s.isObject3D&&f==="blocks-pointer-events"){t||t===""?(a=ie==null?void 0:(r=ie.userData).tres__registerBlockingObjectAtPointerEventHandler)==null||a.call(r,s):(i=ie==null?void 0:(o=ie.userData).tres__deregisterBlockingObjectAtPointerEventHandler)==null||i.call(o,s);return}let p=ht(f),h=u==null?void 0:u[p];if(f==="args"){const M=s,b=e??[],T=t??[],g=s.userData.tres__name||s.type;g&&b.length&&!jo(b,T)&&(u=Object.assign(M,new Gt.value[g](...t)));return}if(u.type==="BufferGeometry"){if(f==="args")return;u.setAttribute(ht(f),new Ge(...t));return}if(f.includes("-")&&h===void 0){const M=f.split("-");h=M.reduce((b,T)=>b[ht(T)],u),f=M.pop(),p=f.toLowerCase(),h!=null&&h.set||(u=M.reduce((b,T)=>b[ht(T)],u))}let y=t;if(y===""&&(y=!0),yn(h)){Array.isArray(y)?s[p](...y):s[p](y);return}!(h!=null&&h.set)&&!yn(h)?u[p]=y:h.constructor===y.constructor&&h!=null&&h.copy?h==null||h.copy(y):Array.isArray(y)?h.set(...y):!h.isColor&&h.setScalar?h.setScalar(y):h.set(y)}},parentNode(s){return(s==null?void 0:s.parent)||null},createText:()=>{},createComment:()=>{},setText:()=>{},setElementText:()=>{},nextSibling:()=>{},querySelector:()=>{},setScopeId:()=>{},cloneNode:()=>{},insertStaticContent:()=>{}},{render:Ko}=no(Go);Qt(dr);const Xo=["data-scene"],Ti=et({__name:"TresCanvas",props:{shadows:{type:Boolean,default:void 0},clearColor:{},toneMapping:{},shadowMapType:{},useLegacyLights:{type:Boolean,default:void 0},outputColorSpace:{},toneMappingExposure:{},camera:{},preset:{},windowSize:{type:Boolean,default:void 0},disableRender:{type:Boolean,default:void 0},context:{},precision:{},alpha:{type:Boolean,default:void 0},premultipliedAlpha:{type:Boolean},antialias:{type:Boolean,default:void 0},stencil:{type:Boolean,default:void 0},preserveDrawingBuffer:{type:Boolean,default:void 0},powerPreference:{},depth:{type:Boolean,default:void 0},logarithmicDepthBuffer:{type:Boolean,default:void 0},failIfMajorPerformanceCaveat:{type:Boolean,default:void 0}},setup(s,{expose:n}){var e;const t=s,{logWarning:r}=Mt(),a=pe(),o=tt(new lr);Tt();const i=Hn(),u=(e=hn())==null?void 0:e.appContext.app,f=M=>et({setup(){var b;const T=(b=hn())==null?void 0:b.appContext;return T&&(T.app=u),Vt("useTres",M),Vt("extend",Qt),()=>pn(co,null,i!=null&&i.default?i.default():[])}}),p=M=>{const b=f(M);Ko(pn(b),o.value)},h=he(()=>t.disableRender),y=tt(null);return n({context:y}),ro(()=>{const M=a;y.value=Vo({scene:o.value,canvas:M,windowSize:t.windowSize,disableRender:h,rendererOptions:t}),Ho({scene:o.value,contextParts:y.value});const{registerCamera:b,camera:T,cameras:g,deregisterCamera:P}=y.value;p(y.value);const C=()=>{const E=new Ee(45,window.innerWidth/window.innerHeight,.1,1e3);E.position.set(3,3,3),E.lookAt(0,0,0),b(E);const R=Ke(()=>{g.value.length>=2&&(E.removeFromParent(),P(E),R==null||R())})};We(()=>t.camera,(E,R)=>{E&&b(E),R&&(R.removeFromParent(),P(R))},{immediate:!0}),T.value||(r("No camera found. Creating a default perspective camera. To have full control over a camera, please add one to the scene."),C())}),(M,b)=>(nt(),rt("canvas",{ref_key:"canvas",ref:a,"data-scene":o.value.uuid,class:oo(M.$attrs.class),style:ao({display:"block",width:"100%",height:"100%",position:M.windowSize?"fixed":"relative",top:0,left:0,pointerEvents:"auto",touchAction:"none",...M.$attrs.style})},null,14,Xo))}});function bn(s,n){if(n===Gr)return console.warn("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Geometry already defined as triangles."),s;if(n===Ht||n===zn){let e=s.getIndex();if(e===null){const o=[],i=s.getAttribute("position");if(i!==void 0){for(let u=0;u<i.count;u++)o.push(u);s.setIndex(o),e=s.getIndex()}else return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),s}const t=e.count-2,r=[];if(e)if(n===Ht)for(let o=1;o<=t;o++)r.push(e.getX(0)),r.push(e.getX(o)),r.push(e.getX(o+1));else for(let o=0;o<t;o++)o%2===0?(r.push(e.getX(o)),r.push(e.getX(o+1)),r.push(e.getX(o+2))):(r.push(e.getX(o+2)),r.push(e.getX(o+1)),r.push(e.getX(o)));r.length/3!==t&&console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");const a=s.clone();return a.setIndex(r),a.clearGroups(),a}else return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unknown draw mode:",n),s}const Wo=parseInt(En.replace(/\D+/g,""));var st=Uint8Array,Zn=Uint16Array,Yo=Uint32Array,qo=new st([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),Zo=new st([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),$n=function(s,n){for(var e=new Zn(31),t=0;t<31;++t)e[t]=n+=1<<s[t-1];for(var r=new Yo(e[30]),t=1;t<30;++t)for(var a=e[t];a<e[t+1];++a)r[a]=a-e[t]<<5|t;return[e,r]},Jn=$n(qo,2),$o=Jn[0],Jo=Jn[1];$o[28]=258,Jo[258]=28;$n(Zo,0);var Qo=new Zn(32768);for(var oe=0;oe<32768;++oe){var Oe=(oe&43690)>>>1|(oe&21845)<<1;Oe=(Oe&52428)>>>2|(Oe&13107)<<2,Oe=(Oe&61680)>>>4|(Oe&3855)<<4,Qo[oe]=((Oe&65280)>>>8|(Oe&255)<<8)>>>1}var Pt=new st(288);for(var oe=0;oe<144;++oe)Pt[oe]=8;for(var oe=144;oe<256;++oe)Pt[oe]=9;for(var oe=256;oe<280;++oe)Pt[oe]=7;for(var oe=280;oe<288;++oe)Pt[oe]=8;var ea=new st(32);for(var oe=0;oe<32;++oe)ea[oe]=5;var ta=new st(0),na=typeof TextDecoder<"u"&&new TextDecoder,ra=0;try{na.decode(ta,{stream:!0}),ra=1}catch{}new Ln(0,0,0,"YXZ");new q;var oa=Object.defineProperty,aa=(s,n,e)=>n in s?oa(s,n,{enumerable:!0,configurable:!0,writable:!0,value:e}):s[n]=e,V=(s,n,e)=>(aa(s,typeof n!="symbol"?n+"":n,e),e);const mt=new gr,xn=new vr,ia=Math.cos(70*(Math.PI/180)),An=(s,n)=>(s%n+n)%n;class sa extends xr{constructor(n,e){super(),V(this,"object"),V(this,"domElement"),V(this,"enabled",!0),V(this,"target",new q),V(this,"minDistance",0),V(this,"maxDistance",1/0),V(this,"minZoom",0),V(this,"maxZoom",1/0),V(this,"minPolarAngle",0),V(this,"maxPolarAngle",Math.PI),V(this,"minAzimuthAngle",-1/0),V(this,"maxAzimuthAngle",1/0),V(this,"enableDamping",!1),V(this,"dampingFactor",.05),V(this,"enableZoom",!0),V(this,"zoomSpeed",1),V(this,"enableRotate",!0),V(this,"rotateSpeed",1),V(this,"enablePan",!0),V(this,"panSpeed",1),V(this,"screenSpacePanning",!0),V(this,"keyPanSpeed",7),V(this,"zoomToCursor",!1),V(this,"autoRotate",!1),V(this,"autoRotateSpeed",2),V(this,"reverseOrbit",!1),V(this,"reverseHorizontalOrbit",!1),V(this,"reverseVerticalOrbit",!1),V(this,"keys",{LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"}),V(this,"mouseButtons",{LEFT:ze.ROTATE,MIDDLE:ze.DOLLY,RIGHT:ze.PAN}),V(this,"touches",{ONE:ke.ROTATE,TWO:ke.DOLLY_PAN}),V(this,"target0"),V(this,"position0"),V(this,"zoom0"),V(this,"_domElementKeyEvents",null),V(this,"getPolarAngle"),V(this,"getAzimuthalAngle"),V(this,"setPolarAngle"),V(this,"setAzimuthalAngle"),V(this,"getDistance"),V(this,"listenToKeyEvents"),V(this,"stopListenToKeyEvents"),V(this,"saveState"),V(this,"reset"),V(this,"update"),V(this,"connect"),V(this,"dispose"),this.object=n,this.domElement=e,this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this.getPolarAngle=()=>p.phi,this.getAzimuthalAngle=()=>p.theta,this.setPolarAngle=S=>{let D=An(S,2*Math.PI),H=p.phi;H<0&&(H+=2*Math.PI),D<0&&(D+=2*Math.PI);let J=Math.abs(D-H);2*Math.PI-J<J&&(D<H?D+=2*Math.PI:H+=2*Math.PI),h.phi=D-H,t.update()},this.setAzimuthalAngle=S=>{let D=An(S,2*Math.PI),H=p.theta;H<0&&(H+=2*Math.PI),D<0&&(D+=2*Math.PI);let J=Math.abs(D-H);2*Math.PI-J<J&&(D<H?D+=2*Math.PI:H+=2*Math.PI),h.theta=D-H,t.update()},this.getDistance=()=>t.object.position.distanceTo(t.target),this.listenToKeyEvents=S=>{S.addEventListener("keydown",Lt),this._domElementKeyEvents=S},this.stopListenToKeyEvents=()=>{this._domElementKeyEvents.removeEventListener("keydown",Lt),this._domElementKeyEvents=null},this.saveState=()=>{t.target0.copy(t.target),t.position0.copy(t.object.position),t.zoom0=t.object.zoom},this.reset=()=>{t.target.copy(t.target0),t.object.position.copy(t.position0),t.object.zoom=t.zoom0,t.object.updateProjectionMatrix(),t.dispatchEvent(r),t.update(),u=i.NONE},this.update=(()=>{const S=new q,D=new q(0,1,0),H=new xt().setFromUnitVectors(n.up,D),J=H.clone().invert(),we=new q,Me=new xt,ct=2*Math.PI;return function(){const sn=t.object.position;H.setFromUnitVectors(n.up,D),J.copy(H).invert(),S.copy(sn).sub(t.target),S.applyQuaternion(H),p.setFromVector3(S),t.autoRotate&&u===i.NONE&&k(L()),t.enableDamping?(p.theta+=h.theta*t.dampingFactor,p.phi+=h.phi*t.dampingFactor):(p.theta+=h.theta,p.phi+=h.phi);let Le=t.minAzimuthAngle,Ce=t.maxAzimuthAngle;isFinite(Le)&&isFinite(Ce)&&(Le<-Math.PI?Le+=ct:Le>Math.PI&&(Le-=ct),Ce<-Math.PI?Ce+=ct:Ce>Math.PI&&(Ce-=ct),Le<=Ce?p.theta=Math.max(Le,Math.min(Ce,p.theta)):p.theta=p.theta>(Le+Ce)/2?Math.max(Le,p.theta):Math.min(Ce,p.theta)),p.phi=Math.max(t.minPolarAngle,Math.min(t.maxPolarAngle,p.phi)),p.makeSafe(),t.enableDamping===!0?t.target.addScaledVector(M,t.dampingFactor):t.target.add(M),t.zoomToCursor&&v||t.object.isOrthographicCamera?p.radius=Re(p.radius):p.radius=Re(p.radius*y),S.setFromSpherical(p),S.applyQuaternion(J),sn.copy(t.target).add(S),t.object.lookAt(t.target),t.enableDamping===!0?(h.theta*=1-t.dampingFactor,h.phi*=1-t.dampingFactor,M.multiplyScalar(1-t.dampingFactor)):(h.set(0,0,0),M.set(0,0,0));let ut=!1;if(t.zoomToCursor&&v){let Ye=null;if(t.object instanceof Ee&&t.object.isPerspectiveCamera){const qe=S.length();Ye=Re(qe*y);const dt=qe-Ye;t.object.position.addScaledVector(_,dt),t.object.updateMatrixWorld()}else if(t.object.isOrthographicCamera){const qe=new q(d.x,d.y,0);qe.unproject(t.object),t.object.zoom=Math.max(t.minZoom,Math.min(t.maxZoom,t.object.zoom/y)),t.object.updateProjectionMatrix(),ut=!0;const dt=new q(d.x,d.y,0);dt.unproject(t.object),t.object.position.sub(dt).add(qe),t.object.updateMatrixWorld(),Ye=S.length()}else console.warn("WARNING: OrbitControls.js encountered an unknown camera type - zoom to cursor disabled."),t.zoomToCursor=!1;Ye!==null&&(t.screenSpacePanning?t.target.set(0,0,-1).transformDirection(t.object.matrix).multiplyScalar(Ye).add(t.object.position):(mt.origin.copy(t.object.position),mt.direction.set(0,0,-1).transformDirection(t.object.matrix),Math.abs(t.object.up.dot(mt.direction))<ia?n.lookAt(t.target):(xn.setFromNormalAndCoplanarPoint(t.object.up,t.target),mt.intersectPlane(xn,t.target))))}else t.object instanceof De&&t.object.isOrthographicCamera&&(t.object.zoom=Math.max(t.minZoom,Math.min(t.maxZoom,t.object.zoom/y)),t.object.updateProjectionMatrix(),ut=!0);return y=1,v=!1,ut||we.distanceToSquared(t.object.position)>f||8*(1-Me.dot(t.object.quaternion))>f?(t.dispatchEvent(r),we.copy(t.object.position),Me.copy(t.object.quaternion),ut=!1,!0):!1}})(),this.connect=S=>{S===document&&console.error('THREE.OrbitControls: "document" should not be used as the target "domElement". Please use "renderer.domElement" instead.'),t.domElement=S,t.domElement.style.touchAction="none",t.domElement.addEventListener("contextmenu",rn),t.domElement.addEventListener("pointerdown",ae),t.domElement.addEventListener("pointercancel",Ne),t.domElement.addEventListener("wheel",Se)},this.dispose=()=>{var S,D,H,J,we,Me;(S=t.domElement)==null||S.removeEventListener("contextmenu",rn),(D=t.domElement)==null||D.removeEventListener("pointerdown",ae),(H=t.domElement)==null||H.removeEventListener("pointercancel",Ne),(J=t.domElement)==null||J.removeEventListener("wheel",Se),(we=t.domElement)==null||we.ownerDocument.removeEventListener("pointermove",re),(Me=t.domElement)==null||Me.ownerDocument.removeEventListener("pointerup",xe),t._domElementKeyEvents!==null&&t._domElementKeyEvents.removeEventListener("keydown",Lt)};const t=this,r={type:"change"},a={type:"start"},o={type:"end"},i={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6};let u=i.NONE;const f=1e-6,p=new ln,h=new ln;let y=1;const M=new q,b=new ue,T=new ue,g=new ue,P=new ue,C=new ue,E=new ue,R=new ue,j=new ue,A=new ue,_=new q,d=new ue;let v=!1;const c=[],x={};function L(){return 2*Math.PI/60/60*t.autoRotateSpeed}function F(){return Math.pow(.95,t.zoomSpeed)}function k(S){t.reverseOrbit||t.reverseHorizontalOrbit?h.theta+=S:h.theta-=S}function z(S){t.reverseOrbit||t.reverseVerticalOrbit?h.phi+=S:h.phi-=S}const U=(()=>{const S=new q;return function(D,H){S.setFromMatrixColumn(H,0),S.multiplyScalar(-D),M.add(S)}})(),K=(()=>{const S=new q;return function(D,H){t.screenSpacePanning===!0?S.setFromMatrixColumn(H,1):(S.setFromMatrixColumn(H,0),S.crossVectors(t.object.up,S)),S.multiplyScalar(D),M.add(S)}})(),$=(()=>{const S=new q;return function(D,H){const J=t.domElement;if(J&&t.object instanceof Ee&&t.object.isPerspectiveCamera){const we=t.object.position;S.copy(we).sub(t.target);let Me=S.length();Me*=Math.tan(t.object.fov/2*Math.PI/180),U(2*D*Me/J.clientHeight,t.object.matrix),K(2*H*Me/J.clientHeight,t.object.matrix)}else J&&t.object instanceof De&&t.object.isOrthographicCamera?(U(D*(t.object.right-t.object.left)/t.object.zoom/J.clientWidth,t.object.matrix),K(H*(t.object.top-t.object.bottom)/t.object.zoom/J.clientHeight,t.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),t.enablePan=!1)}})();function Z(S){t.object instanceof Ee&&t.object.isPerspectiveCamera||t.object instanceof De&&t.object.isOrthographicCamera?y/=S:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),t.enableZoom=!1)}function W(S){t.object instanceof Ee&&t.object.isPerspectiveCamera||t.object instanceof De&&t.object.isOrthographicCamera?y*=S:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),t.enableZoom=!1)}function me(S){if(!t.zoomToCursor||!t.domElement)return;v=!0;const D=t.domElement.getBoundingClientRect(),H=S.clientX-D.left,J=S.clientY-D.top,we=D.width,Me=D.height;d.x=H/we*2-1,d.y=-(J/Me)*2+1,_.set(d.x,d.y,1).unproject(t.object).sub(t.object.position).normalize()}function Re(S){return Math.max(t.minDistance,Math.min(t.maxDistance,S))}function _e(S){b.set(S.clientX,S.clientY)}function se(S){me(S),R.set(S.clientX,S.clientY)}function ye(S){P.set(S.clientX,S.clientY)}function Te(S){T.set(S.clientX,S.clientY),g.subVectors(T,b).multiplyScalar(t.rotateSpeed);const D=t.domElement;D&&(k(2*Math.PI*g.x/D.clientHeight),z(2*Math.PI*g.y/D.clientHeight)),b.copy(T),t.update()}function Pe(S){j.set(S.clientX,S.clientY),A.subVectors(j,R),A.y>0?Z(F()):A.y<0&&W(F()),R.copy(j),t.update()}function B(S){C.set(S.clientX,S.clientY),E.subVectors(C,P).multiplyScalar(t.panSpeed),$(E.x,E.y),P.copy(C),t.update()}function l(S){me(S),S.deltaY<0?W(F()):S.deltaY>0&&Z(F()),t.update()}function m(S){let D=!1;switch(S.code){case t.keys.UP:$(0,t.keyPanSpeed),D=!0;break;case t.keys.BOTTOM:$(0,-t.keyPanSpeed),D=!0;break;case t.keys.LEFT:$(t.keyPanSpeed,0),D=!0;break;case t.keys.RIGHT:$(-t.keyPanSpeed,0),D=!0;break}D&&(S.preventDefault(),t.update())}function w(){if(c.length==1)b.set(c[0].pageX,c[0].pageY);else{const S=.5*(c[0].pageX+c[1].pageX),D=.5*(c[0].pageY+c[1].pageY);b.set(S,D)}}function I(){if(c.length==1)P.set(c[0].pageX,c[0].pageY);else{const S=.5*(c[0].pageX+c[1].pageX),D=.5*(c[0].pageY+c[1].pageY);P.set(S,D)}}function O(){const S=c[0].pageX-c[1].pageX,D=c[0].pageY-c[1].pageY,H=Math.sqrt(S*S+D*D);R.set(0,H)}function N(){t.enableZoom&&O(),t.enablePan&&I()}function X(){t.enableZoom&&O(),t.enableRotate&&w()}function te(S){if(c.length==1)T.set(S.pageX,S.pageY);else{const H=Ct(S),J=.5*(S.pageX+H.x),we=.5*(S.pageY+H.y);T.set(J,we)}g.subVectors(T,b).multiplyScalar(t.rotateSpeed);const D=t.domElement;D&&(k(2*Math.PI*g.x/D.clientHeight),z(2*Math.PI*g.y/D.clientHeight)),b.copy(T)}function ne(S){if(c.length==1)C.set(S.pageX,S.pageY);else{const D=Ct(S),H=.5*(S.pageX+D.x),J=.5*(S.pageY+D.y);C.set(H,J)}E.subVectors(C,P).multiplyScalar(t.panSpeed),$(E.x,E.y),P.copy(C)}function de(S){const D=Ct(S),H=S.pageX-D.x,J=S.pageY-D.y,we=Math.sqrt(H*H+J*J);j.set(0,we),A.set(0,Math.pow(j.y/R.y,t.zoomSpeed)),Z(A.y),R.copy(j)}function le(S){t.enableZoom&&de(S),t.enablePan&&ne(S)}function ce(S){t.enableZoom&&de(S),t.enableRotate&&te(S)}function ae(S){var D,H;t.enabled!==!1&&(c.length===0&&((D=t.domElement)==null||D.ownerDocument.addEventListener("pointermove",re),(H=t.domElement)==null||H.ownerDocument.addEventListener("pointerup",xe)),sr(S),S.pointerType==="touch"?ar(S):St(S))}function re(S){t.enabled!==!1&&(S.pointerType==="touch"?ir(S):Et(S))}function xe(S){var D,H,J;on(S),c.length===0&&((D=t.domElement)==null||D.releasePointerCapture(S.pointerId),(H=t.domElement)==null||H.ownerDocument.removeEventListener("pointermove",re),(J=t.domElement)==null||J.ownerDocument.removeEventListener("pointerup",xe)),t.dispatchEvent(o),u=i.NONE}function Ne(S){on(S)}function St(S){let D;switch(S.button){case 0:D=t.mouseButtons.LEFT;break;case 1:D=t.mouseButtons.MIDDLE;break;case 2:D=t.mouseButtons.RIGHT;break;default:D=-1}switch(D){case ze.DOLLY:if(t.enableZoom===!1)return;se(S),u=i.DOLLY;break;case ze.ROTATE:if(S.ctrlKey||S.metaKey||S.shiftKey){if(t.enablePan===!1)return;ye(S),u=i.PAN}else{if(t.enableRotate===!1)return;_e(S),u=i.ROTATE}break;case ze.PAN:if(S.ctrlKey||S.metaKey||S.shiftKey){if(t.enableRotate===!1)return;_e(S),u=i.ROTATE}else{if(t.enablePan===!1)return;ye(S),u=i.PAN}break;default:u=i.NONE}u!==i.NONE&&t.dispatchEvent(a)}function Et(S){if(t.enabled!==!1)switch(u){case i.ROTATE:if(t.enableRotate===!1)return;Te(S);break;case i.DOLLY:if(t.enableZoom===!1)return;Pe(S);break;case i.PAN:if(t.enablePan===!1)return;B(S);break}}function Se(S){t.enabled===!1||t.enableZoom===!1||u!==i.NONE&&u!==i.ROTATE||(S.preventDefault(),t.dispatchEvent(a),l(S),t.dispatchEvent(o))}function Lt(S){t.enabled===!1||t.enablePan===!1||m(S)}function ar(S){switch(an(S),c.length){case 1:switch(t.touches.ONE){case ke.ROTATE:if(t.enableRotate===!1)return;w(),u=i.TOUCH_ROTATE;break;case ke.PAN:if(t.enablePan===!1)return;I(),u=i.TOUCH_PAN;break;default:u=i.NONE}break;case 2:switch(t.touches.TWO){case ke.DOLLY_PAN:if(t.enableZoom===!1&&t.enablePan===!1)return;N(),u=i.TOUCH_DOLLY_PAN;break;case ke.DOLLY_ROTATE:if(t.enableZoom===!1&&t.enableRotate===!1)return;X(),u=i.TOUCH_DOLLY_ROTATE;break;default:u=i.NONE}break;default:u=i.NONE}u!==i.NONE&&t.dispatchEvent(a)}function ir(S){switch(an(S),u){case i.TOUCH_ROTATE:if(t.enableRotate===!1)return;te(S),t.update();break;case i.TOUCH_PAN:if(t.enablePan===!1)return;ne(S),t.update();break;case i.TOUCH_DOLLY_PAN:if(t.enableZoom===!1&&t.enablePan===!1)return;le(S),t.update();break;case i.TOUCH_DOLLY_ROTATE:if(t.enableZoom===!1&&t.enableRotate===!1)return;ce(S),t.update();break;default:u=i.NONE}}function rn(S){t.enabled!==!1&&S.preventDefault()}function sr(S){c.push(S)}function on(S){delete x[S.pointerId];for(let D=0;D<c.length;D++)if(c[D].pointerId==S.pointerId){c.splice(D,1);return}}function an(S){let D=x[S.pointerId];D===void 0&&(D=new ue,x[S.pointerId]=D),D.set(S.pageX,S.pageY)}function Ct(S){const D=S.pointerId===c[0].pointerId?c[1]:c[0];return x[D.pointerId]}e!==void 0&&this.connect(e),this.update()}}class la extends jn{constructor(n){super(n),this.dracoLoader=null,this.ktx2Loader=null,this.meshoptDecoder=null,this.pluginCallbacks=[],this.register(function(e){return new ha(e)}),this.register(function(e){return new xa(e)}),this.register(function(e){return new Aa(e)}),this.register(function(e){return new _a(e)}),this.register(function(e){return new ma(e)}),this.register(function(e){return new ga(e)}),this.register(function(e){return new va(e)}),this.register(function(e){return new ya(e)}),this.register(function(e){return new fa(e)}),this.register(function(e){return new wa(e)}),this.register(function(e){return new pa(e)}),this.register(function(e){return new ba(e)}),this.register(function(e){return new ua(e)}),this.register(function(e){return new Ta(e)}),this.register(function(e){return new Ma(e)})}load(n,e,t,r){const a=this;let o;this.resourcePath!==""?o=this.resourcePath:this.path!==""?o=this.path:o=Fe.extractUrlBase(n),this.manager.itemStart(n);const i=function(f){r?r(f):console.error(f),a.manager.itemError(n),a.manager.itemEnd(n)},u=new At(this.manager);u.setPath(this.path),u.setResponseType("arraybuffer"),u.setRequestHeader(this.requestHeader),u.setWithCredentials(this.withCredentials),u.load(n,function(f){try{a.parse(f,o,function(p){e(p),a.manager.itemEnd(n)},i)}catch(p){i(p)}},t,i)}setDRACOLoader(n){return this.dracoLoader=n,this}setDDSLoader(){throw new Error('THREE.GLTFLoader: "MSFT_texture_dds" no longer supported. Please update to "KHR_texture_basisu".')}setKTX2Loader(n){return this.ktx2Loader=n,this}setMeshoptDecoder(n){return this.meshoptDecoder=n,this}register(n){return this.pluginCallbacks.indexOf(n)===-1&&this.pluginCallbacks.push(n),this}unregister(n){return this.pluginCallbacks.indexOf(n)!==-1&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(n),1),this}parse(n,e,t,r){let a;const o={},i={};if(typeof n=="string")a=JSON.parse(n);else if(n instanceof ArrayBuffer)if(Fe.decodeText(new Uint8Array(n.slice(0,4)))===Qn){try{o[Y.KHR_BINARY_GLTF]=new Pa(n)}catch(f){r&&r(f);return}a=JSON.parse(o[Y.KHR_BINARY_GLTF].content)}else a=JSON.parse(Fe.decodeText(new Uint8Array(n)));else a=n;if(a.asset===void 0||a.asset.version[0]<2){r&&r(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported."));return}const u=new Ua(a,{path:e||this.resourcePath||"",crossOrigin:this.crossOrigin,requestHeader:this.requestHeader,manager:this.manager,ktx2Loader:this.ktx2Loader,meshoptDecoder:this.meshoptDecoder});u.fileLoader.setRequestHeader(this.requestHeader);for(let f=0;f<this.pluginCallbacks.length;f++){const p=this.pluginCallbacks[f](u);i[p.name]=p,o[p.name]=!0}if(a.extensionsUsed)for(let f=0;f<a.extensionsUsed.length;++f){const p=a.extensionsUsed[f],h=a.extensionsRequired||[];switch(p){case Y.KHR_MATERIALS_UNLIT:o[p]=new da;break;case Y.KHR_DRACO_MESH_COMPRESSION:o[p]=new Sa(a,this.dracoLoader);break;case Y.KHR_TEXTURE_TRANSFORM:o[p]=new Ea;break;case Y.KHR_MESH_QUANTIZATION:o[p]=new La;break;default:h.indexOf(p)>=0&&i[p]===void 0&&console.warn('THREE.GLTFLoader: Unknown extension "'+p+'".')}}u.setExtensions(o),u.setPlugins(i),u.parse(t,r)}parseAsync(n,e){const t=this;return new Promise(function(r,a){t.parse(n,e,r,a)})}}function ca(){let s={};return{get:function(n){return s[n]},add:function(n,e){s[n]=e},remove:function(n){delete s[n]},removeAll:function(){s={}}}}const Y={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_IOR:"KHR_materials_ior",KHR_MATERIALS_SHEEN:"KHR_materials_sheen",KHR_MATERIALS_SPECULAR:"KHR_materials_specular",KHR_MATERIALS_TRANSMISSION:"KHR_materials_transmission",KHR_MATERIALS_IRIDESCENCE:"KHR_materials_iridescence",KHR_MATERIALS_ANISOTROPY:"KHR_materials_anisotropy",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_MATERIALS_VOLUME:"KHR_materials_volume",KHR_TEXTURE_BASISU:"KHR_texture_basisu",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",KHR_MATERIALS_EMISSIVE_STRENGTH:"KHR_materials_emissive_strength",EXT_TEXTURE_WEBP:"EXT_texture_webp",EXT_TEXTURE_AVIF:"EXT_texture_avif",EXT_MESHOPT_COMPRESSION:"EXT_meshopt_compression",EXT_MESH_GPU_INSTANCING:"EXT_mesh_gpu_instancing"};class ua{constructor(n){this.parser=n,this.name=Y.KHR_LIGHTS_PUNCTUAL,this.cache={refs:{},uses:{}}}_markDefs(){const n=this.parser,e=this.parser.json.nodes||[];for(let t=0,r=e.length;t<r;t++){const a=e[t];a.extensions&&a.extensions[this.name]&&a.extensions[this.name].light!==void 0&&n._addNodeRef(this.cache,a.extensions[this.name].light)}}_loadLight(n){const e=this.parser,t="light:"+n;let r=e.cache.get(t);if(r)return r;const a=e.json,o=((a.extensions&&a.extensions[this.name]||{}).lights||[])[n];let i;const u=new be(16777215);o.color!==void 0&&u.fromArray(o.color);const f=o.range!==void 0?o.range:0;switch(o.type){case"directional":i=new Lr(u),i.target.position.set(0,0,-1),i.add(i.target);break;case"point":i=new Er(u),i.distance=f;break;case"spot":i=new Sr(u),i.distance=f,o.spot=o.spot||{},o.spot.innerConeAngle=o.spot.innerConeAngle!==void 0?o.spot.innerConeAngle:0,o.spot.outerConeAngle=o.spot.outerConeAngle!==void 0?o.spot.outerConeAngle:Math.PI/4,i.angle=o.spot.outerConeAngle,i.penumbra=1-o.spot.innerConeAngle/o.spot.outerConeAngle,i.target.position.set(0,0,-1),i.add(i.target);break;default:throw new Error("THREE.GLTFLoader: Unexpected light type: "+o.type)}return i.position.set(0,0,0),i.decay=2,je(i,o),o.intensity!==void 0&&(i.intensity=o.intensity),i.name=e.createUniqueName(o.name||"light_"+n),r=Promise.resolve(i),e.cache.add(t,r),r}getDependency(n,e){if(n==="light")return this._loadLight(e)}createNodeAttachment(n){const e=this,t=this.parser,r=t.json.nodes[n],a=(r.extensions&&r.extensions[this.name]||{}).light;return a===void 0?null:this._loadLight(a).then(function(o){return t._getNodeRef(e.cache,a,o)})}}class da{constructor(){this.name=Y.KHR_MATERIALS_UNLIT}getMaterialType(){return Ve}extendParams(n,e,t){const r=[];n.color=new be(1,1,1),n.opacity=1;const a=e.pbrMetallicRoughness;if(a){if(Array.isArray(a.baseColorFactor)){const o=a.baseColorFactor;n.color.fromArray(o),n.opacity=o[3]}a.baseColorTexture!==void 0&&r.push(t.assignTexture(n,"map",a.baseColorTexture,3001))}return Promise.all(r)}}class fa{constructor(n){this.parser=n,this.name=Y.KHR_MATERIALS_EMISSIVE_STRENGTH}extendMaterialParams(n,e){const t=this.parser.json.materials[n];if(!t.extensions||!t.extensions[this.name])return Promise.resolve();const r=t.extensions[this.name].emissiveStrength;return r!==void 0&&(e.emissiveIntensity=r),Promise.resolve()}}class ha{constructor(n){this.parser=n,this.name=Y.KHR_MATERIALS_CLEARCOAT}getMaterialType(n){const e=this.parser.json.materials[n];return!e.extensions||!e.extensions[this.name]?null:Be}extendMaterialParams(n,e){const t=this.parser,r=t.json.materials[n];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const a=[],o=r.extensions[this.name];if(o.clearcoatFactor!==void 0&&(e.clearcoat=o.clearcoatFactor),o.clearcoatTexture!==void 0&&a.push(t.assignTexture(e,"clearcoatMap",o.clearcoatTexture)),o.clearcoatRoughnessFactor!==void 0&&(e.clearcoatRoughness=o.clearcoatRoughnessFactor),o.clearcoatRoughnessTexture!==void 0&&a.push(t.assignTexture(e,"clearcoatRoughnessMap",o.clearcoatRoughnessTexture)),o.clearcoatNormalTexture!==void 0&&(a.push(t.assignTexture(e,"clearcoatNormalMap",o.clearcoatNormalTexture)),o.clearcoatNormalTexture.scale!==void 0)){const i=o.clearcoatNormalTexture.scale;e.clearcoatNormalScale=new ue(i,i)}return Promise.all(a)}}class pa{constructor(n){this.parser=n,this.name=Y.KHR_MATERIALS_IRIDESCENCE}getMaterialType(n){const e=this.parser.json.materials[n];return!e.extensions||!e.extensions[this.name]?null:Be}extendMaterialParams(n,e){const t=this.parser,r=t.json.materials[n];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const a=[],o=r.extensions[this.name];return o.iridescenceFactor!==void 0&&(e.iridescence=o.iridescenceFactor),o.iridescenceTexture!==void 0&&a.push(t.assignTexture(e,"iridescenceMap",o.iridescenceTexture)),o.iridescenceIor!==void 0&&(e.iridescenceIOR=o.iridescenceIor),e.iridescenceThicknessRange===void 0&&(e.iridescenceThicknessRange=[100,400]),o.iridescenceThicknessMinimum!==void 0&&(e.iridescenceThicknessRange[0]=o.iridescenceThicknessMinimum),o.iridescenceThicknessMaximum!==void 0&&(e.iridescenceThicknessRange[1]=o.iridescenceThicknessMaximum),o.iridescenceThicknessTexture!==void 0&&a.push(t.assignTexture(e,"iridescenceThicknessMap",o.iridescenceThicknessTexture)),Promise.all(a)}}class ma{constructor(n){this.parser=n,this.name=Y.KHR_MATERIALS_SHEEN}getMaterialType(n){const e=this.parser.json.materials[n];return!e.extensions||!e.extensions[this.name]?null:Be}extendMaterialParams(n,e){const t=this.parser,r=t.json.materials[n];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const a=[];e.sheenColor=new be(0,0,0),e.sheenRoughness=0,e.sheen=1;const o=r.extensions[this.name];return o.sheenColorFactor!==void 0&&e.sheenColor.fromArray(o.sheenColorFactor),o.sheenRoughnessFactor!==void 0&&(e.sheenRoughness=o.sheenRoughnessFactor),o.sheenColorTexture!==void 0&&a.push(t.assignTexture(e,"sheenColorMap",o.sheenColorTexture,3001)),o.sheenRoughnessTexture!==void 0&&a.push(t.assignTexture(e,"sheenRoughnessMap",o.sheenRoughnessTexture)),Promise.all(a)}}class ga{constructor(n){this.parser=n,this.name=Y.KHR_MATERIALS_TRANSMISSION}getMaterialType(n){const e=this.parser.json.materials[n];return!e.extensions||!e.extensions[this.name]?null:Be}extendMaterialParams(n,e){const t=this.parser,r=t.json.materials[n];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const a=[],o=r.extensions[this.name];return o.transmissionFactor!==void 0&&(e.transmission=o.transmissionFactor),o.transmissionTexture!==void 0&&a.push(t.assignTexture(e,"transmissionMap",o.transmissionTexture)),Promise.all(a)}}class va{constructor(n){this.parser=n,this.name=Y.KHR_MATERIALS_VOLUME}getMaterialType(n){const e=this.parser.json.materials[n];return!e.extensions||!e.extensions[this.name]?null:Be}extendMaterialParams(n,e){const t=this.parser,r=t.json.materials[n];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const a=[],o=r.extensions[this.name];e.thickness=o.thicknessFactor!==void 0?o.thicknessFactor:0,o.thicknessTexture!==void 0&&a.push(t.assignTexture(e,"thicknessMap",o.thicknessTexture)),e.attenuationDistance=o.attenuationDistance||1/0;const i=o.attenuationColor||[1,1,1];return e.attenuationColor=new be(i[0],i[1],i[2]),Promise.all(a)}}class ya{constructor(n){this.parser=n,this.name=Y.KHR_MATERIALS_IOR}getMaterialType(n){const e=this.parser.json.materials[n];return!e.extensions||!e.extensions[this.name]?null:Be}extendMaterialParams(n,e){const t=this.parser.json.materials[n];if(!t.extensions||!t.extensions[this.name])return Promise.resolve();const r=t.extensions[this.name];return e.ior=r.ior!==void 0?r.ior:1.5,Promise.resolve()}}class wa{constructor(n){this.parser=n,this.name=Y.KHR_MATERIALS_SPECULAR}getMaterialType(n){const e=this.parser.json.materials[n];return!e.extensions||!e.extensions[this.name]?null:Be}extendMaterialParams(n,e){const t=this.parser,r=t.json.materials[n];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const a=[],o=r.extensions[this.name];e.specularIntensity=o.specularFactor!==void 0?o.specularFactor:1,o.specularTexture!==void 0&&a.push(t.assignTexture(e,"specularIntensityMap",o.specularTexture));const i=o.specularColorFactor||[1,1,1];return e.specularColor=new be(i[0],i[1],i[2]),o.specularColorTexture!==void 0&&a.push(t.assignTexture(e,"specularColorMap",o.specularColorTexture,3001)),Promise.all(a)}}class ba{constructor(n){this.parser=n,this.name=Y.KHR_MATERIALS_ANISOTROPY}getMaterialType(n){const e=this.parser.json.materials[n];return!e.extensions||!e.extensions[this.name]?null:Be}extendMaterialParams(n,e){const t=this.parser,r=t.json.materials[n];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const a=[],o=r.extensions[this.name];return o.anisotropyStrength!==void 0&&(e.anisotropy=o.anisotropyStrength),o.anisotropyRotation!==void 0&&(e.anisotropyRotation=o.anisotropyRotation),o.anisotropyTexture!==void 0&&a.push(t.assignTexture(e,"anisotropyMap",o.anisotropyTexture)),Promise.all(a)}}class xa{constructor(n){this.parser=n,this.name=Y.KHR_TEXTURE_BASISU}loadTexture(n){const e=this.parser,t=e.json,r=t.textures[n];if(!r.extensions||!r.extensions[this.name])return null;const a=r.extensions[this.name],o=e.options.ktx2Loader;if(!o){if(t.extensionsRequired&&t.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures");return null}return e.loadTextureImage(n,a.source,o)}}class Aa{constructor(n){this.parser=n,this.name=Y.EXT_TEXTURE_WEBP,this.isSupported=null}loadTexture(n){const e=this.name,t=this.parser,r=t.json,a=r.textures[n];if(!a.extensions||!a.extensions[e])return null;const o=a.extensions[e],i=r.images[o.source];let u=t.textureLoader;if(i.uri){const f=t.options.manager.getHandler(i.uri);f!==null&&(u=f)}return this.detectSupport().then(function(f){if(f)return t.loadTextureImage(n,o.source,u);if(r.extensionsRequired&&r.extensionsRequired.indexOf(e)>=0)throw new Error("THREE.GLTFLoader: WebP required by asset but unsupported.");return t.loadTexture(n)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(n){const e=new Image;e.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",e.onload=e.onerror=function(){n(e.height===1)}})),this.isSupported}}class _a{constructor(n){this.parser=n,this.name=Y.EXT_TEXTURE_AVIF,this.isSupported=null}loadTexture(n){const e=this.name,t=this.parser,r=t.json,a=r.textures[n];if(!a.extensions||!a.extensions[e])return null;const o=a.extensions[e],i=r.images[o.source];let u=t.textureLoader;if(i.uri){const f=t.options.manager.getHandler(i.uri);f!==null&&(u=f)}return this.detectSupport().then(function(f){if(f)return t.loadTextureImage(n,o.source,u);if(r.extensionsRequired&&r.extensionsRequired.indexOf(e)>=0)throw new Error("THREE.GLTFLoader: AVIF required by asset but unsupported.");return t.loadTexture(n)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(n){const e=new Image;e.src="data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAABcAAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAEAAAABAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQAMAAAAABNjb2xybmNseAACAAIABoAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAAB9tZGF0EgAKCBgABogQEDQgMgkQAAAAB8dSLfI=",e.onload=e.onerror=function(){n(e.height===1)}})),this.isSupported}}class Ta{constructor(n){this.name=Y.EXT_MESHOPT_COMPRESSION,this.parser=n}loadBufferView(n){const e=this.parser.json,t=e.bufferViews[n];if(t.extensions&&t.extensions[this.name]){const r=t.extensions[this.name],a=this.parser.getDependency("buffer",r.buffer),o=this.parser.options.meshoptDecoder;if(!o||!o.supported){if(e.extensionsRequired&&e.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files");return null}return a.then(function(i){const u=r.byteOffset||0,f=r.byteLength||0,p=r.count,h=r.byteStride,y=new Uint8Array(i,u,f);return o.decodeGltfBufferAsync?o.decodeGltfBufferAsync(p,h,y,r.mode,r.filter).then(function(M){return M.buffer}):o.ready.then(function(){const M=new ArrayBuffer(p*h);return o.decodeGltfBuffer(new Uint8Array(M),p,h,y,r.mode,r.filter),M})})}else return null}}class Ma{constructor(n){this.name=Y.EXT_MESH_GPU_INSTANCING,this.parser=n}createNodeMesh(n){const e=this.parser.json,t=e.nodes[n];if(!t.extensions||!t.extensions[this.name]||t.mesh===void 0)return null;const r=e.meshes[t.mesh];for(const u of r.primitives)if(u.mode!==Ae.TRIANGLES&&u.mode!==Ae.TRIANGLE_STRIP&&u.mode!==Ae.TRIANGLE_FAN&&u.mode!==void 0)return null;const a=t.extensions[this.name].attributes,o=[],i={};for(const u in a)o.push(this.parser.getDependency("accessor",a[u]).then(f=>(i[u]=f,i[u])));return o.length<1?null:(o.push(this.parser.createNodeMesh(n)),Promise.all(o).then(u=>{const f=u.pop(),p=f.isGroup?f.children:[f],h=u[0].count,y=[];for(const M of p){const b=new Qe,T=new q,g=new xt,P=new q(1,1,1),C=new Cr(M.geometry,M.material,h);for(let E=0;E<h;E++)i.TRANSLATION&&T.fromBufferAttribute(i.TRANSLATION,E),i.ROTATION&&g.fromBufferAttribute(i.ROTATION,E),i.SCALE&&P.fromBufferAttribute(i.SCALE,E),C.setMatrixAt(E,b.compose(T,g,P));for(const E in i)E!=="TRANSLATION"&&E!=="ROTATION"&&E!=="SCALE"&&M.geometry.setAttribute(E,i[E]);Dn.prototype.copy.call(C,M),this.parser.assignFinalMaterial(C),y.push(C)}return f.isGroup?(f.clear(),f.add(...y),f):y[0]}))}}const Qn="glTF",Ze=12,_n={JSON:1313821514,BIN:5130562};class Pa{constructor(n){this.name=Y.KHR_BINARY_GLTF,this.content=null,this.body=null;const e=new DataView(n,0,Ze);if(this.header={magic:Fe.decodeText(new Uint8Array(n.slice(0,4))),version:e.getUint32(4,!0),length:e.getUint32(8,!0)},this.header.magic!==Qn)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected.");const t=this.header.length-Ze,r=new DataView(n,Ze);let a=0;for(;a<t;){const o=r.getUint32(a,!0);a+=4;const i=r.getUint32(a,!0);if(a+=4,i===_n.JSON){const u=new Uint8Array(n,Ze+a,o);this.content=Fe.decodeText(u)}else if(i===_n.BIN){const u=Ze+a;this.body=n.slice(u,u+o)}a+=o}if(this.content===null)throw new Error("THREE.GLTFLoader: JSON content not found.")}}class Sa{constructor(n,e){if(!e)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=Y.KHR_DRACO_MESH_COMPRESSION,this.json=n,this.dracoLoader=e,this.dracoLoader.preload()}decodePrimitive(n,e){const t=this.json,r=this.dracoLoader,a=n.extensions[this.name].bufferView,o=n.extensions[this.name].attributes,i={},u={},f={};for(const p in o){const h=Kt[p]||p.toLowerCase();i[h]=o[p]}for(const p in n.attributes){const h=Kt[p]||p.toLowerCase();if(o[p]!==void 0){const y=t.accessors[n.attributes[p]],M=Xe[y.componentType];f[h]=M.name,u[h]=y.normalized===!0}}return e.getDependency("bufferView",a).then(function(p){return new Promise(function(h){r.decodeDracoFile(p,function(y){for(const M in y.attributes){const b=y.attributes[M],T=u[M];T!==void 0&&(b.normalized=T)}h(y)},i,f)})})}}class Ea{constructor(){this.name=Y.KHR_TEXTURE_TRANSFORM}extendTexture(n,e){return(e.texCoord===void 0||e.texCoord===n.channel)&&e.offset===void 0&&e.rotation===void 0&&e.scale===void 0||(n=n.clone(),e.texCoord!==void 0&&(n.channel=e.texCoord),e.offset!==void 0&&n.offset.fromArray(e.offset),e.rotation!==void 0&&(n.rotation=e.rotation),e.scale!==void 0&&n.repeat.fromArray(e.scale),n.needsUpdate=!0),n}}class La{constructor(){this.name=Y.KHR_MESH_QUANTIZATION}}class er extends to{constructor(n,e,t,r){super(n,e,t,r)}copySampleValue_(n){const e=this.resultBuffer,t=this.sampleValues,r=this.valueSize,a=n*r*3+r;for(let o=0;o!==r;o++)e[o]=t[a+o];return e}interpolate_(n,e,t,r){const a=this.resultBuffer,o=this.sampleValues,i=this.valueSize,u=i*2,f=i*3,p=r-e,h=(t-e)/p,y=h*h,M=y*h,b=n*f,T=b-f,g=-2*M+3*y,P=M-y,C=1-g,E=P-y+h;for(let R=0;R!==i;R++){const j=o[T+R+i],A=o[T+R+u]*p,_=o[b+R+i],d=o[b+R]*p;a[R]=C*j+E*A+g*_+P*d}return a}}const Ca=new xt;class Ra extends er{interpolate_(n,e,t,r){const a=super.interpolate_(n,e,t,r);return Ca.fromArray(a).normalize().toArray(a),a}}const Ae={FLOAT:5126,FLOAT_MAT3:35675,FLOAT_MAT4:35676,FLOAT_VEC2:35664,FLOAT_VEC3:35665,FLOAT_VEC4:35666,LINEAR:9729,REPEAT:10497,SAMPLER_2D:35678,POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6,UNSIGNED_BYTE:5121,UNSIGNED_SHORT:5123},Xe={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},Tn={9728:Kr,9729:Bn,9984:Xr,9985:Wr,9986:Yr,9987:Nn},Mn={33071:qr,33648:Zr,10497:zt},jt={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},Kt={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",...Wo>=152?{TEXCOORD_0:"uv",TEXCOORD_1:"uv1",TEXCOORD_2:"uv2",TEXCOORD_3:"uv3"}:{TEXCOORD_0:"uv",TEXCOORD_1:"uv2"},COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},Ie={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},Oa={CUBICSPLINE:void 0,LINEAR:Fn,STEP:$r},Dt={OPAQUE:"OPAQUE",MASK:"MASK",BLEND:"BLEND"};function Ia(s){return s.DefaultMaterial===void 0&&(s.DefaultMaterial=new Un({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:Jr})),s.DefaultMaterial}function Ue(s,n,e){for(const t in e.extensions)s[t]===void 0&&(n.userData.gltfExtensions=n.userData.gltfExtensions||{},n.userData.gltfExtensions[t]=e.extensions[t])}function je(s,n){n.extras!==void 0&&(typeof n.extras=="object"?Object.assign(s.userData,n.extras):console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+n.extras))}function ka(s,n,e){let t=!1,r=!1,a=!1;for(let f=0,p=n.length;f<p;f++){const h=n[f];if(h.POSITION!==void 0&&(t=!0),h.NORMAL!==void 0&&(r=!0),h.COLOR_0!==void 0&&(a=!0),t&&r&&a)break}if(!t&&!r&&!a)return Promise.resolve(s);const o=[],i=[],u=[];for(let f=0,p=n.length;f<p;f++){const h=n[f];if(t){const y=h.POSITION!==void 0?e.getDependency("accessor",h.POSITION):s.attributes.position;o.push(y)}if(r){const y=h.NORMAL!==void 0?e.getDependency("accessor",h.NORMAL):s.attributes.normal;i.push(y)}if(a){const y=h.COLOR_0!==void 0?e.getDependency("accessor",h.COLOR_0):s.attributes.color;u.push(y)}}return Promise.all([Promise.all(o),Promise.all(i),Promise.all(u)]).then(function(f){const p=f[0],h=f[1],y=f[2];return t&&(s.morphAttributes.position=p),r&&(s.morphAttributes.normal=h),a&&(s.morphAttributes.color=y),s.morphTargetsRelative=!0,s})}function ja(s,n){if(s.updateMorphTargets(),n.weights!==void 0)for(let e=0,t=n.weights.length;e<t;e++)s.morphTargetInfluences[e]=n.weights[e];if(n.extras&&Array.isArray(n.extras.targetNames)){const e=n.extras.targetNames;if(s.morphTargetInfluences.length===e.length){s.morphTargetDictionary={};for(let t=0,r=e.length;t<r;t++)s.morphTargetDictionary[e[t]]=t}else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function Da(s){let n;const e=s.extensions&&s.extensions[Y.KHR_DRACO_MESH_COMPRESSION];if(e?n="draco:"+e.bufferView+":"+e.indices+":"+Bt(e.attributes):n=s.indices+":"+Bt(s.attributes)+":"+s.mode,s.targets!==void 0)for(let t=0,r=s.targets.length;t<r;t++)n+=":"+Bt(s.targets[t]);return n}function Bt(s){let n="";const e=Object.keys(s).sort();for(let t=0,r=e.length;t<r;t++)n+=e[t]+":"+s[e[t]]+";";return n}function Xt(s){switch(s){case Int8Array:return 1/127;case Uint8Array:return 1/255;case Int16Array:return 1/32767;case Uint16Array:return 1/65535;default:throw new Error("THREE.GLTFLoader: Unsupported normalized accessor component type.")}}function Ba(s){return s.search(/\.jpe?g($|\?)/i)>0||s.search(/^data\:image\/jpeg/)===0?"image/jpeg":s.search(/\.webp($|\?)/i)>0||s.search(/^data\:image\/webp/)===0?"image/webp":"image/png"}const Na=new Qe;class Ua{constructor(n={},e={}){this.json=n,this.extensions={},this.plugins={},this.options=e,this.cache=new ca,this.associations=new Map,this.primitiveCache={},this.nodeCache={},this.meshCache={refs:{},uses:{}},this.cameraCache={refs:{},uses:{}},this.lightCache={refs:{},uses:{}},this.sourceCache={},this.textureCache={},this.nodeNamesUsed={};let t=!1,r=!1,a=-1;typeof navigator<"u"&&typeof navigator.userAgent<"u"&&(t=/^((?!chrome|android).)*safari/i.test(navigator.userAgent)===!0,r=navigator.userAgent.indexOf("Firefox")>-1,a=r?navigator.userAgent.match(/Firefox\/([0-9]+)\./)[1]:-1),typeof createImageBitmap>"u"||t||r&&a<98?this.textureLoader=new Rr(this.options.manager):this.textureLoader=new Or(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.textureLoader.setRequestHeader(this.options.requestHeader),this.fileLoader=new At(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),this.options.crossOrigin==="use-credentials"&&this.fileLoader.setWithCredentials(!0)}setExtensions(n){this.extensions=n}setPlugins(n){this.plugins=n}parse(n,e){const t=this,r=this.json,a=this.extensions;this.cache.removeAll(),this.nodeCache={},this._invokeAll(function(o){return o._markDefs&&o._markDefs()}),Promise.all(this._invokeAll(function(o){return o.beforeRoot&&o.beforeRoot()})).then(function(){return Promise.all([t.getDependencies("scene"),t.getDependencies("animation"),t.getDependencies("camera")])}).then(function(o){const i={scene:o[0][r.scene||0],scenes:o[0],animations:o[1],cameras:o[2],asset:r.asset,parser:t,userData:{}};Ue(a,i,r),je(i,r),Promise.all(t._invokeAll(function(u){return u.afterRoot&&u.afterRoot(i)})).then(function(){n(i)})}).catch(e)}_markDefs(){const n=this.json.nodes||[],e=this.json.skins||[],t=this.json.meshes||[];for(let r=0,a=e.length;r<a;r++){const o=e[r].joints;for(let i=0,u=o.length;i<u;i++)n[o[i]].isBone=!0}for(let r=0,a=n.length;r<a;r++){const o=n[r];o.mesh!==void 0&&(this._addNodeRef(this.meshCache,o.mesh),o.skin!==void 0&&(t[o.mesh].isSkinnedMesh=!0)),o.camera!==void 0&&this._addNodeRef(this.cameraCache,o.camera)}}_addNodeRef(n,e){e!==void 0&&(n.refs[e]===void 0&&(n.refs[e]=n.uses[e]=0),n.refs[e]++)}_getNodeRef(n,e,t){if(n.refs[e]<=1)return t;const r=t.clone(),a=(o,i)=>{const u=this.associations.get(o);u!=null&&this.associations.set(i,u);for(const[f,p]of o.children.entries())a(p,i.children[f])};return a(t,r),r.name+="_instance_"+n.uses[e]++,r}_invokeOne(n){const e=Object.values(this.plugins);e.push(this);for(let t=0;t<e.length;t++){const r=n(e[t]);if(r)return r}return null}_invokeAll(n){const e=Object.values(this.plugins);e.unshift(this);const t=[];for(let r=0;r<e.length;r++){const a=n(e[r]);a&&t.push(a)}return t}getDependency(n,e){const t=n+":"+e;let r=this.cache.get(t);if(!r){switch(n){case"scene":r=this.loadScene(e);break;case"node":r=this._invokeOne(function(a){return a.loadNode&&a.loadNode(e)});break;case"mesh":r=this._invokeOne(function(a){return a.loadMesh&&a.loadMesh(e)});break;case"accessor":r=this.loadAccessor(e);break;case"bufferView":r=this._invokeOne(function(a){return a.loadBufferView&&a.loadBufferView(e)});break;case"buffer":r=this.loadBuffer(e);break;case"material":r=this._invokeOne(function(a){return a.loadMaterial&&a.loadMaterial(e)});break;case"texture":r=this._invokeOne(function(a){return a.loadTexture&&a.loadTexture(e)});break;case"skin":r=this.loadSkin(e);break;case"animation":r=this._invokeOne(function(a){return a.loadAnimation&&a.loadAnimation(e)});break;case"camera":r=this.loadCamera(e);break;default:if(r=this._invokeOne(function(a){return a!=this&&a.getDependency&&a.getDependency(n,e)}),!r)throw new Error("Unknown type: "+n);break}this.cache.add(t,r)}return r}getDependencies(n){let e=this.cache.get(n);if(!e){const t=this,r=this.json[n+(n==="mesh"?"es":"s")]||[];e=Promise.all(r.map(function(a,o){return t.getDependency(n,o)})),this.cache.add(n,e)}return e}loadBuffer(n){const e=this.json.buffers[n],t=this.fileLoader;if(e.type&&e.type!=="arraybuffer")throw new Error("THREE.GLTFLoader: "+e.type+" buffer type is not supported.");if(e.uri===void 0&&n===0)return Promise.resolve(this.extensions[Y.KHR_BINARY_GLTF].body);const r=this.options;return new Promise(function(a,o){t.load(Fe.resolveURL(e.uri,r.path),a,void 0,function(){o(new Error('THREE.GLTFLoader: Failed to load buffer "'+e.uri+'".'))})})}loadBufferView(n){const e=this.json.bufferViews[n];return this.getDependency("buffer",e.buffer).then(function(t){const r=e.byteLength||0,a=e.byteOffset||0;return t.slice(a,a+r)})}loadAccessor(n){const e=this,t=this.json,r=this.json.accessors[n];if(r.bufferView===void 0&&r.sparse===void 0){const o=jt[r.type],i=Xe[r.componentType],u=r.normalized===!0,f=new i(r.count*o);return Promise.resolve(new Ge(f,o,u))}const a=[];return r.bufferView!==void 0?a.push(this.getDependency("bufferView",r.bufferView)):a.push(null),r.sparse!==void 0&&(a.push(this.getDependency("bufferView",r.sparse.indices.bufferView)),a.push(this.getDependency("bufferView",r.sparse.values.bufferView))),Promise.all(a).then(function(o){const i=o[0],u=jt[r.type],f=Xe[r.componentType],p=f.BYTES_PER_ELEMENT,h=p*u,y=r.byteOffset||0,M=r.bufferView!==void 0?t.bufferViews[r.bufferView].byteStride:void 0,b=r.normalized===!0;let T,g;if(M&&M!==h){const P=Math.floor(y/M),C="InterleavedBuffer:"+r.bufferView+":"+r.componentType+":"+P+":"+r.count;let E=e.cache.get(C);E||(T=new f(i,P*M,r.count*M/p),E=new Cn(T,M/p),e.cache.add(C,E)),g=new Ft(E,u,y%M/p,b)}else i===null?T=new f(r.count*u):T=new f(i,y,r.count*u),g=new Ge(T,u,b);if(r.sparse!==void 0){const P=jt.SCALAR,C=Xe[r.sparse.indices.componentType],E=r.sparse.indices.byteOffset||0,R=r.sparse.values.byteOffset||0,j=new C(o[1],E,r.sparse.count*P),A=new f(o[2],R,r.sparse.count*u);i!==null&&(g=new Ge(g.array.slice(),g.itemSize,g.normalized));for(let _=0,d=j.length;_<d;_++){const v=j[_];if(g.setX(v,A[_*u]),u>=2&&g.setY(v,A[_*u+1]),u>=3&&g.setZ(v,A[_*u+2]),u>=4&&g.setW(v,A[_*u+3]),u>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}}return g})}loadTexture(n){const e=this.json,t=this.options,r=e.textures[n].source,a=e.images[r];let o=this.textureLoader;if(a.uri){const i=t.manager.getHandler(a.uri);i!==null&&(o=i)}return this.loadTextureImage(n,r,o)}loadTextureImage(n,e,t){const r=this,a=this.json,o=a.textures[n],i=a.images[e],u=(i.uri||i.bufferView)+":"+o.sampler;if(this.textureCache[u])return this.textureCache[u];const f=this.loadImageSource(e,t).then(function(p){p.flipY=!1,p.name=o.name||i.name||"",p.name===""&&typeof i.uri=="string"&&i.uri.startsWith("data:image/")===!1&&(p.name=i.uri);const h=(a.samplers||{})[o.sampler]||{};return p.magFilter=Tn[h.magFilter]||Bn,p.minFilter=Tn[h.minFilter]||Nn,p.wrapS=Mn[h.wrapS]||zt,p.wrapT=Mn[h.wrapT]||zt,r.associations.set(p,{textures:n}),p}).catch(function(){return null});return this.textureCache[u]=f,f}loadImageSource(n,e){const t=this,r=this.json,a=this.options;if(this.sourceCache[n]!==void 0)return this.sourceCache[n].then(h=>h.clone());const o=r.images[n],i=self.URL||self.webkitURL;let u=o.uri||"",f=!1;if(o.bufferView!==void 0)u=t.getDependency("bufferView",o.bufferView).then(function(h){f=!0;const y=new Blob([h],{type:o.mimeType});return u=i.createObjectURL(y),u});else if(o.uri===void 0)throw new Error("THREE.GLTFLoader: Image "+n+" is missing URI and bufferView");const p=Promise.resolve(u).then(function(h){return new Promise(function(y,M){let b=y;e.isImageBitmapLoader===!0&&(b=function(T){const g=new dn(T);g.needsUpdate=!0,y(g)}),e.load(Fe.resolveURL(h,a.path),b,void 0,M)})}).then(function(h){return f===!0&&i.revokeObjectURL(u),h.userData.mimeType=o.mimeType||Ba(o.uri),h}).catch(function(h){throw console.error("THREE.GLTFLoader: Couldn't load texture",u),h});return this.sourceCache[n]=p,p}assignTexture(n,e,t,r){const a=this;return this.getDependency("texture",t.index).then(function(o){if(!o)return null;if(t.texCoord!==void 0&&t.texCoord>0&&(o=o.clone(),o.channel=t.texCoord),a.extensions[Y.KHR_TEXTURE_TRANSFORM]){const i=t.extensions!==void 0?t.extensions[Y.KHR_TEXTURE_TRANSFORM]:void 0;if(i){const u=a.associations.get(o);o=a.extensions[Y.KHR_TEXTURE_TRANSFORM].extendTexture(o,i),a.associations.set(o,u)}}return r!==void 0&&("colorSpace"in o?o.colorSpace=r===3001?"srgb":"srgb-linear":o.encoding=r),n[e]=o,o})}assignFinalMaterial(n){const e=n.geometry;let t=n.material;const r=e.attributes.tangent===void 0,a=e.attributes.color!==void 0,o=e.attributes.normal===void 0;if(n.isPoints){const i="PointsMaterial:"+t.uuid;let u=this.cache.get(i);u||(u=new Ir,It.prototype.copy.call(u,t),u.color.copy(t.color),u.map=t.map,u.sizeAttenuation=!1,this.cache.add(i,u)),t=u}else if(n.isLine){const i="LineBasicMaterial:"+t.uuid;let u=this.cache.get(i);u||(u=new kr,It.prototype.copy.call(u,t),u.color.copy(t.color),u.map=t.map,this.cache.add(i,u)),t=u}if(r||a||o){let i="ClonedMaterial:"+t.uuid+":";r&&(i+="derivative-tangents:"),a&&(i+="vertex-colors:"),o&&(i+="flat-shading:");let u=this.cache.get(i);u||(u=t.clone(),a&&(u.vertexColors=!0),o&&(u.flatShading=!0),r&&(u.normalScale&&(u.normalScale.y*=-1),u.clearcoatNormalScale&&(u.clearcoatNormalScale.y*=-1)),this.cache.add(i,u),this.associations.set(u,this.associations.get(t))),t=u}n.material=t}getMaterialType(){return Un}loadMaterial(n){const e=this,t=this.json,r=this.extensions,a=t.materials[n];let o;const i={},u=a.extensions||{},f=[];if(u[Y.KHR_MATERIALS_UNLIT]){const h=r[Y.KHR_MATERIALS_UNLIT];o=h.getMaterialType(),f.push(h.extendParams(i,a,e))}else{const h=a.pbrMetallicRoughness||{};if(i.color=new be(1,1,1),i.opacity=1,Array.isArray(h.baseColorFactor)){const y=h.baseColorFactor;i.color.fromArray(y),i.opacity=y[3]}h.baseColorTexture!==void 0&&f.push(e.assignTexture(i,"map",h.baseColorTexture,3001)),i.metalness=h.metallicFactor!==void 0?h.metallicFactor:1,i.roughness=h.roughnessFactor!==void 0?h.roughnessFactor:1,h.metallicRoughnessTexture!==void 0&&(f.push(e.assignTexture(i,"metalnessMap",h.metallicRoughnessTexture)),f.push(e.assignTexture(i,"roughnessMap",h.metallicRoughnessTexture))),o=this._invokeOne(function(y){return y.getMaterialType&&y.getMaterialType(n)}),f.push(Promise.all(this._invokeAll(function(y){return y.extendMaterialParams&&y.extendMaterialParams(n,i)})))}a.doubleSided===!0&&(i.side=kn);const p=a.alphaMode||Dt.OPAQUE;if(p===Dt.BLEND?(i.transparent=!0,i.depthWrite=!1):(i.transparent=!1,p===Dt.MASK&&(i.alphaTest=a.alphaCutoff!==void 0?a.alphaCutoff:.5)),a.normalTexture!==void 0&&o!==Ve&&(f.push(e.assignTexture(i,"normalMap",a.normalTexture)),i.normalScale=new ue(1,1),a.normalTexture.scale!==void 0)){const h=a.normalTexture.scale;i.normalScale.set(h,h)}return a.occlusionTexture!==void 0&&o!==Ve&&(f.push(e.assignTexture(i,"aoMap",a.occlusionTexture)),a.occlusionTexture.strength!==void 0&&(i.aoMapIntensity=a.occlusionTexture.strength)),a.emissiveFactor!==void 0&&o!==Ve&&(i.emissive=new be().fromArray(a.emissiveFactor)),a.emissiveTexture!==void 0&&o!==Ve&&f.push(e.assignTexture(i,"emissiveMap",a.emissiveTexture,3001)),Promise.all(f).then(function(){const h=new o(i);return a.name&&(h.name=a.name),je(h,a),e.associations.set(h,{materials:n}),a.extensions&&Ue(r,h,a),h})}createUniqueName(n){const e=jr.sanitizeNodeName(n||"");return e in this.nodeNamesUsed?e+"_"+ ++this.nodeNamesUsed[e]:(this.nodeNamesUsed[e]=0,e)}loadGeometries(n){const e=this,t=this.extensions,r=this.primitiveCache;function a(i){return t[Y.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(i,e).then(function(u){return Pn(u,i,e)})}const o=[];for(let i=0,u=n.length;i<u;i++){const f=n[i],p=Da(f),h=r[p];if(h)o.push(h.promise);else{let y;f.extensions&&f.extensions[Y.KHR_DRACO_MESH_COMPRESSION]?y=a(f):y=Pn(new qt,f,e),r[p]={primitive:f,promise:y},o.push(y)}}return Promise.all(o)}loadMesh(n){const e=this,t=this.json,r=this.extensions,a=t.meshes[n],o=a.primitives,i=[];for(let u=0,f=o.length;u<f;u++){const p=o[u].material===void 0?Ia(this.cache):this.getDependency("material",o[u].material);i.push(p)}return i.push(e.loadGeometries(o)),Promise.all(i).then(function(u){const f=u.slice(0,u.length-1),p=u[u.length-1],h=[];for(let M=0,b=p.length;M<b;M++){const T=p[M],g=o[M];let P;const C=f[M];if(g.mode===Ae.TRIANGLES||g.mode===Ae.TRIANGLE_STRIP||g.mode===Ae.TRIANGLE_FAN||g.mode===void 0)P=a.isSkinnedMesh===!0?new Dr(T,C):new $e(T,C),P.isSkinnedMesh===!0&&P.normalizeSkinWeights(),g.mode===Ae.TRIANGLE_STRIP?P.geometry=bn(P.geometry,zn):g.mode===Ae.TRIANGLE_FAN&&(P.geometry=bn(P.geometry,Ht));else if(g.mode===Ae.LINES)P=new Br(T,C);else if(g.mode===Ae.LINE_STRIP)P=new Nr(T,C);else if(g.mode===Ae.LINE_LOOP)P=new Ur(T,C);else if(g.mode===Ae.POINTS)P=new Fr(T,C);else throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+g.mode);Object.keys(P.geometry.morphAttributes).length>0&&ja(P,a),P.name=e.createUniqueName(a.name||"mesh_"+n),je(P,a),g.extensions&&Ue(r,P,g),e.assignFinalMaterial(P),h.push(P)}for(let M=0,b=h.length;M<b;M++)e.associations.set(h[M],{meshes:n,primitives:M});if(h.length===1)return a.extensions&&Ue(r,h[0],a),h[0];const y=new kt;a.extensions&&Ue(r,y,a),e.associations.set(y,{meshes:n});for(let M=0,b=h.length;M<b;M++)y.add(h[M]);return y})}loadCamera(n){let e;const t=this.json.cameras[n],r=t[t.type];if(!r){console.warn("THREE.GLTFLoader: Missing camera parameters.");return}return t.type==="perspective"?e=new Ee(Zt.radToDeg(r.yfov),r.aspectRatio||1,r.znear||1,r.zfar||2e6):t.type==="orthographic"&&(e=new De(-r.xmag,r.xmag,r.ymag,-r.ymag,r.znear,r.zfar)),t.name&&(e.name=this.createUniqueName(t.name)),je(e,t),Promise.resolve(e)}loadSkin(n){const e=this.json.skins[n],t=[];for(let r=0,a=e.joints.length;r<a;r++)t.push(this._loadNodeShallow(e.joints[r]));return e.inverseBindMatrices!==void 0?t.push(this.getDependency("accessor",e.inverseBindMatrices)):t.push(null),Promise.all(t).then(function(r){const a=r.pop(),o=r,i=[],u=[];for(let f=0,p=o.length;f<p;f++){const h=o[f];if(h){i.push(h);const y=new Qe;a!==null&&y.fromArray(a.array,f*16),u.push(y)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',e.joints[f])}return new zr(i,u)})}loadAnimation(n){const e=this.json.animations[n],t=e.name?e.name:"animation_"+n,r=[],a=[],o=[],i=[],u=[];for(let f=0,p=e.channels.length;f<p;f++){const h=e.channels[f],y=e.samplers[h.sampler],M=h.target,b=M.node,T=e.parameters!==void 0?e.parameters[y.input]:y.input,g=e.parameters!==void 0?e.parameters[y.output]:y.output;M.node!==void 0&&(r.push(this.getDependency("node",b)),a.push(this.getDependency("accessor",T)),o.push(this.getDependency("accessor",g)),i.push(y),u.push(M))}return Promise.all([Promise.all(r),Promise.all(a),Promise.all(o),Promise.all(i),Promise.all(u)]).then(function(f){const p=f[0],h=f[1],y=f[2],M=f[3],b=f[4],T=[];for(let g=0,P=p.length;g<P;g++){const C=p[g],E=h[g],R=y[g],j=M[g],A=b[g];if(C===void 0)continue;C.updateMatrix();let _;switch(Ie[A.path]){case Ie.weights:_=eo;break;case Ie.rotation:_=fn;break;case Ie.position:case Ie.scale:default:_=Qr;break}const d=C.name?C.name:C.uuid,v=j.interpolation!==void 0?Oa[j.interpolation]:Fn,c=[];Ie[A.path]===Ie.weights?C.traverse(function(L){L.morphTargetInfluences&&c.push(L.name?L.name:L.uuid)}):c.push(d);let x=R.array;if(R.normalized){const L=Xt(x.constructor),F=new Float32Array(x.length);for(let k=0,z=x.length;k<z;k++)F[k]=x[k]*L;x=F}for(let L=0,F=c.length;L<F;L++){const k=new _(c[L]+"."+Ie[A.path],E.array,x,v);j.interpolation==="CUBICSPLINE"&&(k.createInterpolant=function(z){const U=this instanceof fn?Ra:er;return new U(this.times,this.values,this.getValueSize()/3,z)},k.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0),T.push(k)}}return new Hr(t,void 0,T)})}createNodeMesh(n){const e=this.json,t=this,r=e.nodes[n];return r.mesh===void 0?null:t.getDependency("mesh",r.mesh).then(function(a){const o=t._getNodeRef(t.meshCache,r.mesh,a);return r.weights!==void 0&&o.traverse(function(i){if(i.isMesh)for(let u=0,f=r.weights.length;u<f;u++)i.morphTargetInfluences[u]=r.weights[u]}),o})}loadNode(n){const e=this.json,t=this,r=e.nodes[n],a=t._loadNodeShallow(n),o=[],i=r.children||[];for(let f=0,p=i.length;f<p;f++)o.push(t.getDependency("node",i[f]));const u=r.skin===void 0?Promise.resolve(null):t.getDependency("skin",r.skin);return Promise.all([a,Promise.all(o),u]).then(function(f){const p=f[0],h=f[1],y=f[2];y!==null&&p.traverse(function(M){M.isSkinnedMesh&&M.bind(y,Na)});for(let M=0,b=h.length;M<b;M++)p.add(h[M]);return p})}_loadNodeShallow(n){const e=this.json,t=this.extensions,r=this;if(this.nodeCache[n]!==void 0)return this.nodeCache[n];const a=e.nodes[n],o=a.name?r.createUniqueName(a.name):"",i=[],u=r._invokeOne(function(f){return f.createNodeMesh&&f.createNodeMesh(n)});return u&&i.push(u),a.camera!==void 0&&i.push(r.getDependency("camera",a.camera).then(function(f){return r._getNodeRef(r.cameraCache,a.camera,f)})),r._invokeAll(function(f){return f.createNodeAttachment&&f.createNodeAttachment(n)}).forEach(function(f){i.push(f)}),this.nodeCache[n]=Promise.all(i).then(function(f){let p;if(a.isBone===!0?p=new Vr:f.length>1?p=new kt:f.length===1?p=f[0]:p=new Dn,p!==f[0])for(let h=0,y=f.length;h<y;h++)p.add(f[h]);if(a.name&&(p.userData.name=a.name,p.name=o),je(p,a),a.extensions&&Ue(t,p,a),a.matrix!==void 0){const h=new Qe;h.fromArray(a.matrix),p.applyMatrix4(h)}else a.translation!==void 0&&p.position.fromArray(a.translation),a.rotation!==void 0&&p.quaternion.fromArray(a.rotation),a.scale!==void 0&&p.scale.fromArray(a.scale);return r.associations.has(p)||r.associations.set(p,{}),r.associations.get(p).nodes=n,p}),this.nodeCache[n]}loadScene(n){const e=this.extensions,t=this.json.scenes[n],r=this,a=new kt;t.name&&(a.name=r.createUniqueName(t.name)),je(a,t),t.extensions&&Ue(e,a,t);const o=t.nodes||[],i=[];for(let u=0,f=o.length;u<f;u++)i.push(r.getDependency("node",o[u]));return Promise.all(i).then(function(u){for(let p=0,h=u.length;p<h;p++)a.add(u[p]);const f=p=>{const h=new Map;for(const[y,M]of r.associations)(y instanceof It||y instanceof dn)&&h.set(y,M);return p.traverse(y=>{const M=r.associations.get(y);M!=null&&h.set(y,M)}),h};return r.associations=f(a),a})}}function Fa(s,n,e){const t=n.attributes,r=new $t;if(t.POSITION!==void 0){const i=e.json.accessors[t.POSITION],u=i.min,f=i.max;if(u!==void 0&&f!==void 0){if(r.set(new q(u[0],u[1],u[2]),new q(f[0],f[1],f[2])),i.normalized){const p=Xt(Xe[i.componentType]);r.min.multiplyScalar(p),r.max.multiplyScalar(p)}}else{console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.");return}}else return;const a=n.targets;if(a!==void 0){const i=new q,u=new q;for(let f=0,p=a.length;f<p;f++){const h=a[f];if(h.POSITION!==void 0){const y=e.json.accessors[h.POSITION],M=y.min,b=y.max;if(M!==void 0&&b!==void 0){if(u.setX(Math.max(Math.abs(M[0]),Math.abs(b[0]))),u.setY(Math.max(Math.abs(M[1]),Math.abs(b[1]))),u.setZ(Math.max(Math.abs(M[2]),Math.abs(b[2]))),y.normalized){const T=Xt(Xe[y.componentType]);u.multiplyScalar(T)}i.max(u)}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}r.expandByVector(i)}s.boundingBox=r;const o=new On;r.getCenter(o.center),o.radius=r.min.distanceTo(r.max)/2,s.boundingSphere=o}function Pn(s,n,e){const t=n.attributes,r=[];function a(o,i){return e.getDependency("accessor",o).then(function(u){s.setAttribute(i,u)})}for(const o in t){const i=Kt[o]||o.toLowerCase();i in s.attributes||r.push(a(t[o],i))}if(n.indices!==void 0&&!s.index){const o=e.getDependency("accessor",n.indices).then(function(i){s.setIndex(i)});r.push(o)}return je(s,n),Fa(s,n,e),Promise.all(r).then(function(){return n.targets!==void 0?ka(s,n.targets,e):s})}new Ln;new q;var za=Object.defineProperty,Ha=(s,n,e)=>n in s?za(s,n,{enumerable:!0,configurable:!0,writable:!0,value:e}):s[n]=e,en=(s,n,e)=>(Ha(s,typeof n!="symbol"?n+"":n,e),e);class tr{constructor(n){en(this,"data"),this.data=n}generateShapes(n,e=100,t){const r=[],a={letterSpacing:0,lineHeight:1,...t},o=Va(n,e,this.data,a);for(let i=0,u=o.length;i<u;i++)Array.prototype.push.apply(r,o[i].toShapes(!1));return r}}en(tr,"isFont");en(tr,"type");function Va(s,n,e,t){const r=Array.from(s),a=n/e.resolution,o=(e.boundingBox.yMax-e.boundingBox.yMin+e.underlineThickness)*a,i=[];let u=0,f=0;for(let p=0;p<r.length;p++){const h=r[p];if(h===`
`)u=0,f-=o*t.lineHeight;else{const y=Ga(h,a,u,f,e);y&&(u+=y.offsetX+t.letterSpacing,i.push(y.path))}}return i}function Ga(s,n,e,t,r){const a=r.glyphs[s]||r.glyphs["?"];if(!a){console.error('THREE.Font: character "'+s+'" does not exists in font family '+r.familyName+".");return}const o=new Pr;let i,u,f,p,h,y,M,b;if(a.o){const T=a._cachedOutline||(a._cachedOutline=a.o.split(" "));for(let g=0,P=T.length;g<P;)switch(T[g++]){case"m":i=parseInt(T[g++])*n+e,u=parseInt(T[g++])*n+t,o.moveTo(i,u);break;case"l":i=parseInt(T[g++])*n+e,u=parseInt(T[g++])*n+t,o.lineTo(i,u);break;case"q":f=parseInt(T[g++])*n+e,p=parseInt(T[g++])*n+t,h=parseInt(T[g++])*n+e,y=parseInt(T[g++])*n+t,o.quadraticCurveTo(h,y,f,p);break;case"b":f=parseInt(T[g++])*n+e,p=parseInt(T[g++])*n+t,h=parseInt(T[g++])*n+e,y=parseInt(T[g++])*n+t,M=parseInt(T[g++])*n+e,b=parseInt(T[g++])*n+t,o.bezierCurveTo(h,y,M,b,f,p);break}}return{offsetX:a.ha*n,path:o}}const Nt=new WeakMap;class Ka extends jn{constructor(n){super(n),this.decoderPath="",this.decoderConfig={},this.decoderBinary=null,this.decoderPending=null,this.workerLimit=4,this.workerPool=[],this.workerNextTaskID=1,this.workerSourceURL="",this.defaultAttributeIDs={position:"POSITION",normal:"NORMAL",color:"COLOR",uv:"TEX_COORD"},this.defaultAttributeTypes={position:"Float32Array",normal:"Float32Array",color:"Float32Array",uv:"Float32Array"}}setDecoderPath(n){return this.decoderPath=n,this}setDecoderConfig(n){return this.decoderConfig=n,this}setWorkerLimit(n){return this.workerLimit=n,this}load(n,e,t,r){const a=new At(this.manager);a.setPath(this.path),a.setResponseType("arraybuffer"),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(n,o=>{const i={attributeIDs:this.defaultAttributeIDs,attributeTypes:this.defaultAttributeTypes,useUniqueIDs:!1};this.decodeGeometry(o,i).then(e).catch(r)},t,r)}decodeDracoFile(n,e,t,r){const a={attributeIDs:t||this.defaultAttributeIDs,attributeTypes:r||this.defaultAttributeTypes,useUniqueIDs:!!t};this.decodeGeometry(n,a).then(e)}decodeGeometry(n,e){for(const u in e.attributeTypes){const f=e.attributeTypes[u];f.BYTES_PER_ELEMENT!==void 0&&(e.attributeTypes[u]=f.name)}const t=JSON.stringify(e);if(Nt.has(n)){const u=Nt.get(n);if(u.key===t)return u.promise;if(n.byteLength===0)throw new Error("THREE.DRACOLoader: Unable to re-decode a buffer with different settings. Buffer has already been transferred.")}let r;const a=this.workerNextTaskID++,o=n.byteLength,i=this._getWorker(a,o).then(u=>(r=u,new Promise((f,p)=>{r._callbacks[a]={resolve:f,reject:p},r.postMessage({type:"decode",id:a,taskConfig:e,buffer:n},[n])}))).then(u=>this._createGeometry(u.geometry));return i.catch(()=>!0).then(()=>{r&&a&&this._releaseTask(r,a)}),Nt.set(n,{key:t,promise:i}),i}_createGeometry(n){const e=new qt;n.index&&e.setIndex(new Ge(n.index.array,1));for(let t=0;t<n.attributes.length;t++){const r=n.attributes[t],a=r.name,o=r.array,i=r.itemSize;e.setAttribute(a,new Ge(o,i))}return e}_loadLibrary(n,e){const t=new At(this.manager);return t.setPath(this.decoderPath),t.setResponseType(e),t.setWithCredentials(this.withCredentials),new Promise((r,a)=>{t.load(n,r,void 0,a)})}preload(){return this._initDecoder(),this}_initDecoder(){if(this.decoderPending)return this.decoderPending;const n=typeof WebAssembly!="object"||this.decoderConfig.type==="js",e=[];return n?e.push(this._loadLibrary("draco_decoder.js","text")):(e.push(this._loadLibrary("draco_wasm_wrapper.js","text")),e.push(this._loadLibrary("draco_decoder.wasm","arraybuffer"))),this.decoderPending=Promise.all(e).then(t=>{const r=t[0];n||(this.decoderConfig.wasmBinary=t[1]);const a=Xa.toString(),o=["/* draco decoder */",r,"","/* worker */",a.substring(a.indexOf("{")+1,a.lastIndexOf("}"))].join(`
`);this.workerSourceURL=URL.createObjectURL(new Blob([o]))}),this.decoderPending}_getWorker(n,e){return this._initDecoder().then(()=>{if(this.workerPool.length<this.workerLimit){const r=new Worker(this.workerSourceURL);r._callbacks={},r._taskCosts={},r._taskLoad=0,r.postMessage({type:"init",decoderConfig:this.decoderConfig}),r.onmessage=function(a){const o=a.data;switch(o.type){case"decode":r._callbacks[o.id].resolve(o);break;case"error":r._callbacks[o.id].reject(o);break;default:console.error('THREE.DRACOLoader: Unexpected message, "'+o.type+'"')}},this.workerPool.push(r)}else this.workerPool.sort(function(r,a){return r._taskLoad>a._taskLoad?-1:1});const t=this.workerPool[this.workerPool.length-1];return t._taskCosts[n]=e,t._taskLoad+=e,t})}_releaseTask(n,e){n._taskLoad-=n._taskCosts[e],delete n._callbacks[e],delete n._taskCosts[e]}debug(){console.log("Task load: ",this.workerPool.map(n=>n._taskLoad))}dispose(){for(let n=0;n<this.workerPool.length;++n)this.workerPool[n].terminate();return this.workerPool.length=0,this}}function Xa(){let s,n;onmessage=function(o){const i=o.data;switch(i.type){case"init":s=i.decoderConfig,n=new Promise(function(p){s.onModuleLoaded=function(h){p({draco:h})},DracoDecoderModule(s)});break;case"decode":const u=i.buffer,f=i.taskConfig;n.then(p=>{const h=p.draco,y=new h.Decoder,M=new h.DecoderBuffer;M.Init(new Int8Array(u),u.byteLength);try{const b=e(h,y,M,f),T=b.attributes.map(g=>g.array.buffer);b.index&&T.push(b.index.array.buffer),self.postMessage({type:"decode",id:i.id,geometry:b},T)}catch(b){console.error(b),self.postMessage({type:"error",id:i.id,error:b.message})}finally{h.destroy(M),h.destroy(y)}});break}};function e(o,i,u,f){const p=f.attributeIDs,h=f.attributeTypes;let y,M;const b=i.GetEncodedGeometryType(u);if(b===o.TRIANGULAR_MESH)y=new o.Mesh,M=i.DecodeBufferToMesh(u,y);else if(b===o.POINT_CLOUD)y=new o.PointCloud,M=i.DecodeBufferToPointCloud(u,y);else throw new Error("THREE.DRACOLoader: Unexpected geometry type.");if(!M.ok()||y.ptr===0)throw new Error("THREE.DRACOLoader: Decoding failed: "+M.error_msg());const T={index:null,attributes:[]};for(const g in p){const P=self[h[g]];let C,E;if(f.useUniqueIDs)E=p[g],C=i.GetAttributeByUniqueId(y,E);else{if(E=i.GetAttributeId(y,o[p[g]]),E===-1)continue;C=i.GetAttribute(y,E)}T.attributes.push(r(o,i,y,g,P,C))}return b===o.TRIANGULAR_MESH&&(T.index=t(o,i,y)),o.destroy(y),T}function t(o,i,u){const f=u.num_faces()*3,p=f*4,h=o._malloc(p);i.GetTrianglesUInt32Array(u,p,h);const y=new Uint32Array(o.HEAPF32.buffer,h,f).slice();return o._free(h),{array:y,itemSize:1}}function r(o,i,u,f,p,h){const y=h.num_components(),M=u.num_points()*y,b=M*p.BYTES_PER_ELEMENT,T=a(o,p),g=o._malloc(b);i.GetAttributeDataArrayForAllPoints(u,h,T,b,g);const P=new p(o.HEAPF32.buffer,g,M).slice();return o._free(g),{name:f,array:P,itemSize:y}}function a(o,i){switch(i){case Float32Array:return o.DT_FLOAT32;case Int8Array:return o.DT_INT8;case Int16Array:return o.DT_INT16;case Int32Array:return o.DT_INT32;case Uint8Array:return o.DT_UINT8;case Uint16Array:return o.DT_UINT16;case Uint32Array:return o.DT_UINT32}}}function Wa(s){return go()?(vo(s),!0):!1}function nr(s){return typeof s=="function"?s():Q(s)}const Ya=typeof window<"u"&&typeof document<"u",qa=Object.prototype.toString,Za=s=>qa.call(s)==="[object Object]",$a=()=>{};function Ja(s){var n;const e=nr(s);return(n=e==null?void 0:e.$el)!=null?n:e}const Qa=Ya?window:void 0;function Ut(...s){let n,e,t,r;if(typeof s[0]=="string"||Array.isArray(s[0])?([e,t,r]=s,n=Qa):[n,e,t,r]=s,!n)return $a;Array.isArray(e)||(e=[e]),Array.isArray(t)||(t=[t]);const a=[],o=()=>{a.forEach(p=>p()),a.length=0},i=(p,h,y,M)=>(p.addEventListener(h,y,M),()=>p.removeEventListener(h,y,M)),u=We(()=>[Ja(n),nr(r)],([p,h])=>{if(o(),!p)return;const y=Za(h)?{...h}:h;a.push(...e.flatMap(M=>t.map(b=>i(p,M,b,y))))},{immediate:!0,flush:"post"}),f=()=>{u(),o()};return Wa(f),f}class _t extends $e{constructor(){super(_t.Geometry,new Ve({opacity:0,transparent:!0})),this.isLensflare=!0,this.type="Lensflare",this.frustumCulled=!1,this.renderOrder=1/0;const n=new q,e=new q,t=new cn(16,16),r=new cn(16,16);let a=un;const o=_t.Geometry,i=new Ot({uniforms:{scale:{value:null},screenPosition:{value:null}},vertexShader:`

				precision highp float;

				uniform vec3 screenPosition;
				uniform vec2 scale;

				attribute vec3 position;

				void main() {

					gl_Position = vec4( position.xy * scale + screenPosition.xy, screenPosition.z, 1.0 );

				}`,fragmentShader:`

				precision highp float;

				void main() {

					gl_FragColor = vec4( 1.0, 0.0, 1.0, 1.0 );

				}`,depthTest:!0,depthWrite:!1,transparent:!1}),u=new Ot({uniforms:{map:{value:t},scale:{value:null},screenPosition:{value:null}},vertexShader:`

				precision highp float;

				uniform vec3 screenPosition;
				uniform vec2 scale;

				attribute vec3 position;
				attribute vec2 uv;

				varying vec2 vUV;

				void main() {

					vUV = uv;

					gl_Position = vec4( position.xy * scale + screenPosition.xy, screenPosition.z, 1.0 );

				}`,fragmentShader:`

				precision highp float;

				uniform sampler2D map;

				varying vec2 vUV;

				void main() {

					gl_FragColor = texture2D( map, vUV );

				}`,depthTest:!1,depthWrite:!1,transparent:!1}),f=new $e(o,i),p=[],h=rr.Shader,y=new Ot({name:h.name,uniforms:{map:{value:null},occlusionMap:{value:r},color:{value:new be(16777215)},scale:{value:new ue},screenPosition:{value:new q}},vertexShader:h.vertexShader,fragmentShader:h.fragmentShader,blending:Ar,transparent:!0,depthWrite:!1}),M=new $e(o,y);this.addElement=function(C){p.push(C)};const b=new ue,T=new ue,g=new _r,P=new at;this.onBeforeRender=function(C,E,R){C.getCurrentViewport(P);const j=C.getRenderTarget(),A=j!==null?j.texture.type:un;a!==A&&(t.dispose(),r.dispose(),t.type=r.type=A,a=A);const _=P.w/P.z,d=P.z/2,v=P.w/2;let c=16/P.w;if(b.set(c*_,c),g.min.set(P.x,P.y),g.max.set(P.x+(P.z-16),P.y+(P.w-16)),e.setFromMatrixPosition(this.matrixWorld),e.applyMatrix4(R.matrixWorldInverse),!(e.z>0)&&(n.copy(e).applyMatrix4(R.projectionMatrix),T.x=P.x+n.x*d+d-8,T.y=P.y+n.y*v+v-8,g.containsPoint(T))){C.copyFramebufferToTexture(T,t);let x=i.uniforms;x.scale.value=b,x.screenPosition.value=n,C.renderBufferDirect(R,null,o,i,f,null),C.copyFramebufferToTexture(T,r),x=u.uniforms,x.scale.value=b,x.screenPosition.value=n,C.renderBufferDirect(R,null,o,u,f,null);const L=-n.x*2,F=-n.y*2;for(let k=0,z=p.length;k<z;k++){const U=p[k],K=y.uniforms;K.color.value.copy(U.color),K.map.value=U.texture,K.screenPosition.value.x=n.x+L*U.distance,K.screenPosition.value.y=n.y+F*U.distance,c=U.size/P.w;const $=P.w/P.z;K.scale.value.set(c*$,c),y.uniformsNeedUpdate=!0,C.renderBufferDirect(R,null,o,y,M,null)}}},this.dispose=function(){i.dispose(),u.dispose(),y.dispose(),t.dispose(),r.dispose();for(let C=0,E=p.length;C<E;C++)p[C].texture.dispose()}}}class rr{constructor(n,e=1,t=0,r=new be(16777215)){this.texture=n,this.size=e,this.distance=t,this.color=r}}rr.Shader={name:"LensflareElementShader",uniforms:{map:{value:null},occlusionMap:{value:null},color:{value:null},scale:{value:null},screenPosition:{value:null}},vertexShader:`

		precision highp float;

		uniform vec3 screenPosition;
		uniform vec2 scale;

		uniform sampler2D occlusionMap;

		attribute vec3 position;
		attribute vec2 uv;

		varying vec2 vUV;
		varying float vVisibility;

		void main() {

			vUV = uv;

			vec2 pos = position.xy;

			vec4 visibility = texture2D( occlusionMap, vec2( 0.1, 0.1 ) );
			visibility += texture2D( occlusionMap, vec2( 0.5, 0.1 ) );
			visibility += texture2D( occlusionMap, vec2( 0.9, 0.1 ) );
			visibility += texture2D( occlusionMap, vec2( 0.9, 0.5 ) );
			visibility += texture2D( occlusionMap, vec2( 0.9, 0.9 ) );
			visibility += texture2D( occlusionMap, vec2( 0.5, 0.9 ) );
			visibility += texture2D( occlusionMap, vec2( 0.1, 0.9 ) );
			visibility += texture2D( occlusionMap, vec2( 0.1, 0.5 ) );
			visibility += texture2D( occlusionMap, vec2( 0.5, 0.5 ) );

			vVisibility =        visibility.r / 9.0;
			vVisibility *= 1.0 - visibility.g / 9.0;
			vVisibility *=       visibility.b / 9.0;

			gl_Position = vec4( ( pos * scale + screenPosition.xy ).xy, screenPosition.z, 1.0 );

		}`,fragmentShader:`

		precision highp float;

		uniform sampler2D map;
		uniform vec3 color;

		varying vec2 vUV;
		varying float vVisibility;

		void main() {

			vec4 texture = texture2D( map, vUV );
			texture.a *= vVisibility;
			gl_FragColor = texture;
			gl_FragColor.rgb *= color;

		}`};_t.Geometry=function(){const s=new qt,n=new Float32Array([-1,-1,0,0,0,1,-1,0,1,0,1,1,0,1,1,-1,1,0,0,1]),e=new Cn(n,5);return s.setIndex([0,1,2,0,2,3]),s.setAttribute("position",new Ft(e,3,0,!1)),s.setAttribute("uv",new Ft(e,2,3,!1)),s}();Zt.clamp;Zt.lerp;let gt=null;function ei(s,n){return e=>{n&&n(e),s.draco&&(gt||(gt=new Ka),gt.setDecoderPath(s.decoderPath||"https://www.gstatic.com/draco/versioned/decoders/1.4.3/"),e.setDRACOLoader(gt))}}async function ti(s,n={draco:!1},e){return await Fo(la,s,ei(n,e))}const ni=["object"],Mi=et({__name:"component",props:{path:{},draco:{type:Boolean,default:!1},decoderPath:{default:"https://www.gstatic.com/draco/versioned/decoders/1.4.1/"}},async setup(s,{expose:n}){let e,t;const r=s,a=pe();n({value:a});const{scene:o}=([e,t]=uo(()=>ti(r.path,{draco:r.draco,decoderPath:r.decoderPath})),e=await e,t(),e);return(i,u)=>(nt(),rt("primitive",fo({ref_key:"modelRef",ref:a,object:Q(o)},i.$attrs),null,16,ni))}}),ri=["target","auto-rotate","auto-rotate-speed","enable-damping","damping-factor","enable-pan","key-pan-speed","keys","max-azimuth-angle","min-azimuth-angle","max-polar-angle","min-polar-angle","min-distance","max-distance","min-zoom","max-zoom","touches","enable-zoom","zoom-speed","enable-rotate","rotate-speed","args"],Pi=et({__name:"OrbitControls",props:{makeDefault:{type:Boolean,default:!1},camera:{},domElement:{},target:{default:()=>[0,0,0]},enableDamping:{type:Boolean,default:!1},dampingFactor:{default:.05},autoRotate:{type:Boolean,default:!1},autoRotateSpeed:{default:2},enablePan:{type:Boolean,default:!0},keyPanSpeed:{default:7},keys:{},maxAzimuthAngle:{default:1/0},minAzimuthAngle:{default:-1/0},maxPolarAngle:{default:Math.PI},minPolarAngle:{default:0},minDistance:{default:0},maxDistance:{default:1/0},minZoom:{default:0},maxZoom:{default:1/0},touches:{default:()=>({ONE:ke.ROTATE,TWO:ke.DOLLY_PAN})},enableZoom:{type:Boolean,default:!0},zoomSpeed:{default:1},enableRotate:{type:Boolean,default:!0},rotateSpeed:{default:1}},emits:["change","start","end"],setup(s,{expose:n,emit:e}){const t=s,r=e,{makeDefault:a,autoRotate:o,autoRotateSpeed:i,enableDamping:u,dampingFactor:f,enablePan:p,keyPanSpeed:h,maxAzimuthAngle:y,minAzimuthAngle:M,maxPolarAngle:b,minPolarAngle:T,minDistance:g,maxDistance:P,minZoom:C,maxZoom:E,enableZoom:R,zoomSpeed:j,enableRotate:A,touches:_,rotateSpeed:d,target:v}=Vn(t),{camera:c,renderer:x,extend:L,controls:F}=qn(),k=pe(null);L({OrbitControls:sa}),We(k,K=>{z(),K&&a.value?F.value=K:F.value=null});function z(){Ut(k.value,"change",()=>r("change",k.value)),Ut(k.value,"start",()=>r("start",k.value)),Ut(k.value,"end",()=>r("end",k.value))}const{onLoop:U}=Tt();return U(()=>{k.value&&(u.value||o.value)&&k.value.update()}),it(()=>{k.value&&k.value.dispose()}),n({value:k}),(K,$)=>(K.camera||Q(c))&&(K.domElement||Q(x))?(nt(),rt("TresOrbitControls",{key:0,ref_key:"controlsRef",ref:k,target:Q(v),"auto-rotate":Q(o),"auto-rotate-speed":Q(i),"enable-damping":Q(u),"damping-factor":Q(f),"enable-pan":Q(p),"key-pan-speed":Q(h),keys:K.keys,"max-azimuth-angle":Q(y),"min-azimuth-angle":Q(M),"max-polar-angle":Q(b),"min-polar-angle":Q(T),"min-distance":Q(g),"max-distance":Q(P),"min-zoom":Q(C),"max-zoom":Q(E),touches:Q(_),"enable-zoom":Q(R),"zoom-speed":Q(j),"enable-rotate":Q(A),"rotate-speed":Q(d),args:[K.camera||Q(c),K.domElement||Q(x).domElement]},null,8,ri)):Gn("",!0)}});var oi=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function vt(s){throw new Error('Could not dynamically require "'+s+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var ai={exports:{}};(function(s,n){(function(e){s.exports=e()})(function(){return function e(t,r,a){function o(f,p){if(!r[f]){if(!t[f]){var h=typeof vt=="function"&&vt;if(!p&&h)return h(f,!0);if(i)return i(f,!0);throw new Error("Cannot find module '"+f+"'")}p=r[f]={exports:{}},t[f][0].call(p.exports,function(y){var M=t[f][1][y];return o(M||y)},p,p.exports,e,t,r,a)}return r[f].exports}for(var i=typeof vt=="function"&&vt,u=0;u<a.length;u++)o(a[u]);return o}({1:[function(e,t,r){(function(a,o,i,u,f,p,h,y,M){var b=e("crypto");function T(A,_){_=C(A,_);var d;return(d=_.algorithm!=="passthrough"?b.createHash(_.algorithm):new j).write===void 0&&(d.write=d.update,d.end=d.update),R(_,d).dispatch(A),d.update||d.end(""),d.digest?d.digest(_.encoding==="buffer"?void 0:_.encoding):(A=d.read(),_.encoding!=="buffer"?A.toString(_.encoding):A)}(r=t.exports=T).sha1=function(A){return T(A)},r.keys=function(A){return T(A,{excludeValues:!0,algorithm:"sha1",encoding:"hex"})},r.MD5=function(A){return T(A,{algorithm:"md5",encoding:"hex"})},r.keysMD5=function(A){return T(A,{algorithm:"md5",encoding:"hex",excludeValues:!0})};var g=b.getHashes?b.getHashes().slice():["sha1","md5"],P=(g.push("passthrough"),["buffer","hex","binary","base64"]);function C(A,_){var d={};if(d.algorithm=(_=_||{}).algorithm||"sha1",d.encoding=_.encoding||"hex",d.excludeValues=!!_.excludeValues,d.algorithm=d.algorithm.toLowerCase(),d.encoding=d.encoding.toLowerCase(),d.ignoreUnknown=_.ignoreUnknown===!0,d.respectType=_.respectType!==!1,d.respectFunctionNames=_.respectFunctionNames!==!1,d.respectFunctionProperties=_.respectFunctionProperties!==!1,d.unorderedArrays=_.unorderedArrays===!0,d.unorderedSets=_.unorderedSets!==!1,d.unorderedObjects=_.unorderedObjects!==!1,d.replacer=_.replacer||void 0,d.excludeKeys=_.excludeKeys||void 0,A===void 0)throw new Error("Object argument required.");for(var v=0;v<g.length;++v)g[v].toLowerCase()===d.algorithm.toLowerCase()&&(d.algorithm=g[v]);if(g.indexOf(d.algorithm)===-1)throw new Error('Algorithm "'+d.algorithm+'"  not supported. supported values: '+g.join(", "));if(P.indexOf(d.encoding)===-1&&d.algorithm!=="passthrough")throw new Error('Encoding "'+d.encoding+'"  not supported. supported values: '+P.join(", "));return d}function E(A){if(typeof A=="function")return/^function\s+\w*\s*\(\s*\)\s*{\s+\[native code\]\s+}$/i.exec(Function.prototype.toString.call(A))!=null}function R(A,_,d){d=d||[];function v(c){return _.update?_.update(c,"utf8"):_.write(c,"utf8")}return{dispatch:function(c){return this["_"+((c=A.replacer?A.replacer(c):c)===null?"null":typeof c)](c)},_object:function(c){var x,L=Object.prototype.toString.call(c),F=/\[object (.*)\]/i.exec(L);if(F=(F=F?F[1]:"unknown:["+L+"]").toLowerCase(),0<=(L=d.indexOf(c)))return this.dispatch("[CIRCULAR:"+L+"]");if(d.push(c),i!==void 0&&i.isBuffer&&i.isBuffer(c))return v("buffer:"),v(c);if(F==="object"||F==="function"||F==="asyncfunction")return L=Object.keys(c),A.unorderedObjects&&(L=L.sort()),A.respectType===!1||E(c)||L.splice(0,0,"prototype","__proto__","constructor"),A.excludeKeys&&(L=L.filter(function(k){return!A.excludeKeys(k)})),v("object:"+L.length+":"),x=this,L.forEach(function(k){x.dispatch(k),v(":"),A.excludeValues||x.dispatch(c[k]),v(",")});if(!this["_"+F]){if(A.ignoreUnknown)return v("["+F+"]");throw new Error('Unknown object type "'+F+'"')}this["_"+F](c)},_array:function(c,k){k=k!==void 0?k:A.unorderedArrays!==!1;var L=this;if(v("array:"+c.length+":"),!k||c.length<=1)return c.forEach(function(z){return L.dispatch(z)});var F=[],k=c.map(function(z){var U=new j,K=d.slice();return R(A,U,K).dispatch(z),F=F.concat(K.slice(d.length)),U.read().toString()});return d=d.concat(F),k.sort(),this._array(k,!1)},_date:function(c){return v("date:"+c.toJSON())},_symbol:function(c){return v("symbol:"+c.toString())},_error:function(c){return v("error:"+c.toString())},_boolean:function(c){return v("bool:"+c.toString())},_string:function(c){v("string:"+c.length+":"),v(c.toString())},_function:function(c){v("fn:"),E(c)?this.dispatch("[native]"):this.dispatch(c.toString()),A.respectFunctionNames!==!1&&this.dispatch("function-name:"+String(c.name)),A.respectFunctionProperties&&this._object(c)},_number:function(c){return v("number:"+c.toString())},_xml:function(c){return v("xml:"+c.toString())},_null:function(){return v("Null")},_undefined:function(){return v("Undefined")},_regexp:function(c){return v("regex:"+c.toString())},_uint8array:function(c){return v("uint8array:"),this.dispatch(Array.prototype.slice.call(c))},_uint8clampedarray:function(c){return v("uint8clampedarray:"),this.dispatch(Array.prototype.slice.call(c))},_int8array:function(c){return v("int8array:"),this.dispatch(Array.prototype.slice.call(c))},_uint16array:function(c){return v("uint16array:"),this.dispatch(Array.prototype.slice.call(c))},_int16array:function(c){return v("int16array:"),this.dispatch(Array.prototype.slice.call(c))},_uint32array:function(c){return v("uint32array:"),this.dispatch(Array.prototype.slice.call(c))},_int32array:function(c){return v("int32array:"),this.dispatch(Array.prototype.slice.call(c))},_float32array:function(c){return v("float32array:"),this.dispatch(Array.prototype.slice.call(c))},_float64array:function(c){return v("float64array:"),this.dispatch(Array.prototype.slice.call(c))},_arraybuffer:function(c){return v("arraybuffer:"),this.dispatch(new Uint8Array(c))},_url:function(c){return v("url:"+c.toString())},_map:function(c){return v("map:"),c=Array.from(c),this._array(c,A.unorderedSets!==!1)},_set:function(c){return v("set:"),c=Array.from(c),this._array(c,A.unorderedSets!==!1)},_file:function(c){return v("file:"),this.dispatch([c.name,c.size,c.type,c.lastModfied])},_blob:function(){if(A.ignoreUnknown)return v("[blob]");throw Error(`Hashing Blob objects is currently not supported
(see https://github.com/puleos/object-hash/issues/26)
Use "options.replacer" or "options.ignoreUnknown"
`)},_domwindow:function(){return v("domwindow")},_bigint:function(c){return v("bigint:"+c.toString())},_process:function(){return v("process")},_timer:function(){return v("timer")},_pipe:function(){return v("pipe")},_tcp:function(){return v("tcp")},_udp:function(){return v("udp")},_tty:function(){return v("tty")},_statwatcher:function(){return v("statwatcher")},_securecontext:function(){return v("securecontext")},_connection:function(){return v("connection")},_zlib:function(){return v("zlib")},_context:function(){return v("context")},_nodescript:function(){return v("nodescript")},_httpparser:function(){return v("httpparser")},_dataview:function(){return v("dataview")},_signal:function(){return v("signal")},_fsevent:function(){return v("fsevent")},_tlswrap:function(){return v("tlswrap")}}}function j(){return{buf:"",write:function(A){this.buf+=A},end:function(A){this.buf+=A},read:function(){return this.buf}}}r.writeToStream=function(A,_,d){return d===void 0&&(d=_,_={}),R(_=C(A,_),d).dispatch(A)}}).call(this,e("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/fake_9a5aa49d.js","/")},{buffer:3,crypto:5,lYpoI2:11}],2:[function(e,t,r){(function(a,o,i,u,f,p,h,y,M){(function(b){var T=typeof Uint8Array<"u"?Uint8Array:Array,g="+".charCodeAt(0),P="/".charCodeAt(0),C="0".charCodeAt(0),E="a".charCodeAt(0),R="A".charCodeAt(0),j="-".charCodeAt(0),A="_".charCodeAt(0);function _(d){return d=d.charCodeAt(0),d===g||d===j?62:d===P||d===A?63:d<C?-1:d<C+10?d-C+26+26:d<R+26?d-R:d<E+26?d-E+26:void 0}b.toByteArray=function(d){var v,c;if(0<d.length%4)throw new Error("Invalid string. Length must be a multiple of 4");var x=d.length,x=d.charAt(x-2)==="="?2:d.charAt(x-1)==="="?1:0,L=new T(3*d.length/4-x),F=0<x?d.length-4:d.length,k=0;function z(U){L[k++]=U}for(v=0;v<F;v+=4,0)z((16711680&(c=_(d.charAt(v))<<18|_(d.charAt(v+1))<<12|_(d.charAt(v+2))<<6|_(d.charAt(v+3))))>>16),z((65280&c)>>8),z(255&c);return x==2?z(255&(c=_(d.charAt(v))<<2|_(d.charAt(v+1))>>4)):x==1&&(z((c=_(d.charAt(v))<<10|_(d.charAt(v+1))<<4|_(d.charAt(v+2))>>2)>>8&255),z(255&c)),L},b.fromByteArray=function(d){var v,c,x,L,F=d.length%3,k="";function z(U){return"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(U)}for(v=0,x=d.length-F;v<x;v+=3)c=(d[v]<<16)+(d[v+1]<<8)+d[v+2],k+=z((L=c)>>18&63)+z(L>>12&63)+z(L>>6&63)+z(63&L);switch(F){case 1:k=(k+=z((c=d[d.length-1])>>2))+z(c<<4&63)+"==";break;case 2:k=(k=(k+=z((c=(d[d.length-2]<<8)+d[d.length-1])>>10))+z(c>>4&63))+z(c<<2&63)+"="}return k}})(r===void 0?this.base64js={}:r)}).call(this,e("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/base64-js/lib/b64.js","/node_modules/gulp-browserify/node_modules/base64-js/lib")},{buffer:3,lYpoI2:11}],3:[function(e,t,r){(function(a,o,g,u,f,p,h,y,M){var b=e("base64-js"),T=e("ieee754");function g(l,m,w){if(!(this instanceof g))return new g(l,m,w);var I,O,N,X,te=typeof l;if(m==="base64"&&te=="string")for(l=(X=l).trim?X.trim():X.replace(/^\s+|\s+$/g,"");l.length%4!=0;)l+="=";if(te=="number")I=$(l);else if(te=="string")I=g.byteLength(l,m);else{if(te!="object")throw new Error("First argument needs to be a number, array or string.");I=$(l.length)}if(g._useTypedArrays?O=g._augment(new Uint8Array(I)):((O=this).length=I,O._isBuffer=!0),g._useTypedArrays&&typeof l.byteLength=="number")O._set(l);else if(Z(X=l)||g.isBuffer(X)||X&&typeof X=="object"&&typeof X.length=="number")for(N=0;N<I;N++)g.isBuffer(l)?O[N]=l.readUInt8(N):O[N]=l[N];else if(te=="string")O.write(l,0,m);else if(te=="number"&&!g._useTypedArrays&&!w)for(N=0;N<I;N++)O[N]=0;return O}function P(l,m,w,I){return g._charsWritten=_e(function(O){for(var N=[],X=0;X<O.length;X++)N.push(255&O.charCodeAt(X));return N}(m),l,w,I)}function C(l,m,w,I){return g._charsWritten=_e(function(O){for(var N,X,te=[],ne=0;ne<O.length;ne++)X=O.charCodeAt(ne),N=X>>8,X=X%256,te.push(X),te.push(N);return te}(m),l,w,I)}function E(l,m,w){var I="";w=Math.min(l.length,w);for(var O=m;O<w;O++)I+=String.fromCharCode(l[O]);return I}function R(l,m,w,N){N||(B(typeof w=="boolean","missing or invalid endian"),B(m!=null,"missing offset"),B(m+1<l.length,"Trying to read beyond buffer length"));var O,N=l.length;if(!(N<=m))return w?(O=l[m],m+1<N&&(O|=l[m+1]<<8)):(O=l[m]<<8,m+1<N&&(O|=l[m+1])),O}function j(l,m,w,N){N||(B(typeof w=="boolean","missing or invalid endian"),B(m!=null,"missing offset"),B(m+3<l.length,"Trying to read beyond buffer length"));var O,N=l.length;if(!(N<=m))return w?(m+2<N&&(O=l[m+2]<<16),m+1<N&&(O|=l[m+1]<<8),O|=l[m],m+3<N&&(O+=l[m+3]<<24>>>0)):(m+1<N&&(O=l[m+1]<<16),m+2<N&&(O|=l[m+2]<<8),m+3<N&&(O|=l[m+3]),O+=l[m]<<24>>>0),O}function A(l,m,w,I){if(I||(B(typeof w=="boolean","missing or invalid endian"),B(m!=null,"missing offset"),B(m+1<l.length,"Trying to read beyond buffer length")),!(l.length<=m))return I=R(l,m,w,!0),32768&I?-1*(65535-I+1):I}function _(l,m,w,I){if(I||(B(typeof w=="boolean","missing or invalid endian"),B(m!=null,"missing offset"),B(m+3<l.length,"Trying to read beyond buffer length")),!(l.length<=m))return I=j(l,m,w,!0),2147483648&I?-1*(4294967295-I+1):I}function d(l,m,w,I){return I||(B(typeof w=="boolean","missing or invalid endian"),B(m+3<l.length,"Trying to read beyond buffer length")),T.read(l,m,w,23,4)}function v(l,m,w,I){return I||(B(typeof w=="boolean","missing or invalid endian"),B(m+7<l.length,"Trying to read beyond buffer length")),T.read(l,m,w,52,8)}function c(l,m,w,I,O){if(O||(B(m!=null,"missing value"),B(typeof I=="boolean","missing or invalid endian"),B(w!=null,"missing offset"),B(w+1<l.length,"trying to write beyond buffer length"),ye(m,65535)),O=l.length,!(O<=w))for(var N=0,X=Math.min(O-w,2);N<X;N++)l[w+N]=(m&255<<8*(I?N:1-N))>>>8*(I?N:1-N)}function x(l,m,w,I,O){if(O||(B(m!=null,"missing value"),B(typeof I=="boolean","missing or invalid endian"),B(w!=null,"missing offset"),B(w+3<l.length,"trying to write beyond buffer length"),ye(m,4294967295)),O=l.length,!(O<=w))for(var N=0,X=Math.min(O-w,4);N<X;N++)l[w+N]=m>>>8*(I?N:3-N)&255}function L(l,m,w,I,O){O||(B(m!=null,"missing value"),B(typeof I=="boolean","missing or invalid endian"),B(w!=null,"missing offset"),B(w+1<l.length,"Trying to write beyond buffer length"),Te(m,32767,-32768)),l.length<=w||c(l,0<=m?m:65535+m+1,w,I,O)}function F(l,m,w,I,O){O||(B(m!=null,"missing value"),B(typeof I=="boolean","missing or invalid endian"),B(w!=null,"missing offset"),B(w+3<l.length,"Trying to write beyond buffer length"),Te(m,2147483647,-2147483648)),l.length<=w||x(l,0<=m?m:4294967295+m+1,w,I,O)}function k(l,m,w,I,O){O||(B(m!=null,"missing value"),B(typeof I=="boolean","missing or invalid endian"),B(w!=null,"missing offset"),B(w+3<l.length,"Trying to write beyond buffer length"),Pe(m,34028234663852886e22,-34028234663852886e22)),l.length<=w||T.write(l,m,w,I,23,4)}function z(l,m,w,I,O){O||(B(m!=null,"missing value"),B(typeof I=="boolean","missing or invalid endian"),B(w!=null,"missing offset"),B(w+7<l.length,"Trying to write beyond buffer length"),Pe(m,17976931348623157e292,-17976931348623157e292)),l.length<=w||T.write(l,m,w,I,52,8)}r.Buffer=g,r.SlowBuffer=g,r.INSPECT_MAX_BYTES=50,g.poolSize=8192,g._useTypedArrays=function(){try{var l=new ArrayBuffer(0),m=new Uint8Array(l);return m.foo=function(){return 42},m.foo()===42&&typeof m.subarray=="function"}catch{return!1}}(),g.isEncoding=function(l){switch(String(l).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"raw":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},g.isBuffer=function(l){return!(l==null||!l._isBuffer)},g.byteLength=function(l,m){var w;switch(l+="",m||"utf8"){case"hex":w=l.length/2;break;case"utf8":case"utf-8":w=me(l).length;break;case"ascii":case"binary":case"raw":w=l.length;break;case"base64":w=Re(l).length;break;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":w=2*l.length;break;default:throw new Error("Unknown encoding")}return w},g.concat=function(l,m){if(B(Z(l),`Usage: Buffer.concat(list, [totalLength])
list should be an Array.`),l.length===0)return new g(0);if(l.length===1)return l[0];if(typeof m!="number")for(O=m=0;O<l.length;O++)m+=l[O].length;for(var w=new g(m),I=0,O=0;O<l.length;O++){var N=l[O];N.copy(w,I),I+=N.length}return w},g.prototype.write=function(l,m,w,I){isFinite(m)?isFinite(w)||(I=w,w=void 0):(ne=I,I=m,m=w,w=ne),m=Number(m)||0;var O,N,X,te,ne=this.length-m;switch((!w||ne<(w=Number(w)))&&(w=ne),I=String(I||"utf8").toLowerCase()){case"hex":O=function(de,le,ce,ae){ce=Number(ce)||0;var re=de.length-ce;(!ae||re<(ae=Number(ae)))&&(ae=re),B((re=le.length)%2==0,"Invalid hex string"),re/2<ae&&(ae=re/2);for(var xe=0;xe<ae;xe++){var Ne=parseInt(le.substr(2*xe,2),16);B(!isNaN(Ne),"Invalid hex string"),de[ce+xe]=Ne}return g._charsWritten=2*xe,xe}(this,l,m,w);break;case"utf8":case"utf-8":N=this,X=m,te=w,O=g._charsWritten=_e(me(l),N,X,te);break;case"ascii":case"binary":O=P(this,l,m,w);break;case"base64":N=this,X=m,te=w,O=g._charsWritten=_e(Re(l),N,X,te);break;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":O=C(this,l,m,w);break;default:throw new Error("Unknown encoding")}return O},g.prototype.toString=function(l,m,w){var I,O,N,X,te=this;if(l=String(l||"utf8").toLowerCase(),m=Number(m)||0,(w=w!==void 0?Number(w):te.length)===m)return"";switch(l){case"hex":I=function(ne,de,le){var ce=ne.length;(!de||de<0)&&(de=0),(!le||le<0||ce<le)&&(le=ce);for(var ae="",re=de;re<le;re++)ae+=W(ne[re]);return ae}(te,m,w);break;case"utf8":case"utf-8":I=function(ne,de,le){var ce="",ae="";le=Math.min(ne.length,le);for(var re=de;re<le;re++)ne[re]<=127?(ce+=se(ae)+String.fromCharCode(ne[re]),ae=""):ae+="%"+ne[re].toString(16);return ce+se(ae)}(te,m,w);break;case"ascii":case"binary":I=E(te,m,w);break;case"base64":O=te,X=w,I=(N=m)===0&&X===O.length?b.fromByteArray(O):b.fromByteArray(O.slice(N,X));break;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":I=function(ne,de,le){for(var ce=ne.slice(de,le),ae="",re=0;re<ce.length;re+=2)ae+=String.fromCharCode(ce[re]+256*ce[re+1]);return ae}(te,m,w);break;default:throw new Error("Unknown encoding")}return I},g.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}},g.prototype.copy=function(l,m,w,I){if(m=m||0,(I=I||I===0?I:this.length)!==(w=w||0)&&l.length!==0&&this.length!==0){B(w<=I,"sourceEnd < sourceStart"),B(0<=m&&m<l.length,"targetStart out of bounds"),B(0<=w&&w<this.length,"sourceStart out of bounds"),B(0<=I&&I<=this.length,"sourceEnd out of bounds"),I>this.length&&(I=this.length);var O=(I=l.length-m<I-w?l.length-m+w:I)-w;if(O<100||!g._useTypedArrays)for(var N=0;N<O;N++)l[N+m]=this[N+w];else l._set(this.subarray(w,w+O),m)}},g.prototype.slice=function(l,m){var w=this.length;if(l=K(l,w,0),m=K(m,w,w),g._useTypedArrays)return g._augment(this.subarray(l,m));for(var I=m-l,O=new g(I,void 0,!0),N=0;N<I;N++)O[N]=this[N+l];return O},g.prototype.get=function(l){return console.log(".get() is deprecated. Access using array indexes instead."),this.readUInt8(l)},g.prototype.set=function(l,m){return console.log(".set() is deprecated. Access using array indexes instead."),this.writeUInt8(l,m)},g.prototype.readUInt8=function(l,m){if(m||(B(l!=null,"missing offset"),B(l<this.length,"Trying to read beyond buffer length")),!(l>=this.length))return this[l]},g.prototype.readUInt16LE=function(l,m){return R(this,l,!0,m)},g.prototype.readUInt16BE=function(l,m){return R(this,l,!1,m)},g.prototype.readUInt32LE=function(l,m){return j(this,l,!0,m)},g.prototype.readUInt32BE=function(l,m){return j(this,l,!1,m)},g.prototype.readInt8=function(l,m){if(m||(B(l!=null,"missing offset"),B(l<this.length,"Trying to read beyond buffer length")),!(l>=this.length))return 128&this[l]?-1*(255-this[l]+1):this[l]},g.prototype.readInt16LE=function(l,m){return A(this,l,!0,m)},g.prototype.readInt16BE=function(l,m){return A(this,l,!1,m)},g.prototype.readInt32LE=function(l,m){return _(this,l,!0,m)},g.prototype.readInt32BE=function(l,m){return _(this,l,!1,m)},g.prototype.readFloatLE=function(l,m){return d(this,l,!0,m)},g.prototype.readFloatBE=function(l,m){return d(this,l,!1,m)},g.prototype.readDoubleLE=function(l,m){return v(this,l,!0,m)},g.prototype.readDoubleBE=function(l,m){return v(this,l,!1,m)},g.prototype.writeUInt8=function(l,m,w){w||(B(l!=null,"missing value"),B(m!=null,"missing offset"),B(m<this.length,"trying to write beyond buffer length"),ye(l,255)),m>=this.length||(this[m]=l)},g.prototype.writeUInt16LE=function(l,m,w){c(this,l,m,!0,w)},g.prototype.writeUInt16BE=function(l,m,w){c(this,l,m,!1,w)},g.prototype.writeUInt32LE=function(l,m,w){x(this,l,m,!0,w)},g.prototype.writeUInt32BE=function(l,m,w){x(this,l,m,!1,w)},g.prototype.writeInt8=function(l,m,w){w||(B(l!=null,"missing value"),B(m!=null,"missing offset"),B(m<this.length,"Trying to write beyond buffer length"),Te(l,127,-128)),m>=this.length||(0<=l?this.writeUInt8(l,m,w):this.writeUInt8(255+l+1,m,w))},g.prototype.writeInt16LE=function(l,m,w){L(this,l,m,!0,w)},g.prototype.writeInt16BE=function(l,m,w){L(this,l,m,!1,w)},g.prototype.writeInt32LE=function(l,m,w){F(this,l,m,!0,w)},g.prototype.writeInt32BE=function(l,m,w){F(this,l,m,!1,w)},g.prototype.writeFloatLE=function(l,m,w){k(this,l,m,!0,w)},g.prototype.writeFloatBE=function(l,m,w){k(this,l,m,!1,w)},g.prototype.writeDoubleLE=function(l,m,w){z(this,l,m,!0,w)},g.prototype.writeDoubleBE=function(l,m,w){z(this,l,m,!1,w)},g.prototype.fill=function(l,m,w){if(m=m||0,w=w||this.length,B(typeof(l=typeof(l=l||0)=="string"?l.charCodeAt(0):l)=="number"&&!isNaN(l),"value is not a number"),B(m<=w,"end < start"),w!==m&&this.length!==0){B(0<=m&&m<this.length,"start out of bounds"),B(0<=w&&w<=this.length,"end out of bounds");for(var I=m;I<w;I++)this[I]=l}},g.prototype.inspect=function(){for(var l=[],m=this.length,w=0;w<m;w++)if(l[w]=W(this[w]),w===r.INSPECT_MAX_BYTES){l[w+1]="...";break}return"<Buffer "+l.join(" ")+">"},g.prototype.toArrayBuffer=function(){if(typeof Uint8Array>"u")throw new Error("Buffer.toArrayBuffer not supported in this browser");if(g._useTypedArrays)return new g(this).buffer;for(var l=new Uint8Array(this.length),m=0,w=l.length;m<w;m+=1)l[m]=this[m];return l.buffer};var U=g.prototype;function K(l,m,w){return typeof l!="number"?w:m<=(l=~~l)?m:0<=l||0<=(l+=m)?l:0}function $(l){return(l=~~Math.ceil(+l))<0?0:l}function Z(l){return(Array.isArray||function(m){return Object.prototype.toString.call(m)==="[object Array]"})(l)}function W(l){return l<16?"0"+l.toString(16):l.toString(16)}function me(l){for(var m=[],w=0;w<l.length;w++){var I=l.charCodeAt(w);if(I<=127)m.push(l.charCodeAt(w));else for(var O=w,N=(55296<=I&&I<=57343&&w++,encodeURIComponent(l.slice(O,w+1)).substr(1).split("%")),X=0;X<N.length;X++)m.push(parseInt(N[X],16))}return m}function Re(l){return b.toByteArray(l)}function _e(l,m,w,I){for(var O=0;O<I&&!(O+w>=m.length||O>=l.length);O++)m[O+w]=l[O];return O}function se(l){try{return decodeURIComponent(l)}catch{return String.fromCharCode(65533)}}function ye(l,m){B(typeof l=="number","cannot write a non-number as a number"),B(0<=l,"specified a negative value for writing an unsigned value"),B(l<=m,"value is larger than maximum value for type"),B(Math.floor(l)===l,"value has a fractional component")}function Te(l,m,w){B(typeof l=="number","cannot write a non-number as a number"),B(l<=m,"value larger than maximum allowed value"),B(w<=l,"value smaller than minimum allowed value"),B(Math.floor(l)===l,"value has a fractional component")}function Pe(l,m,w){B(typeof l=="number","cannot write a non-number as a number"),B(l<=m,"value larger than maximum allowed value"),B(w<=l,"value smaller than minimum allowed value")}function B(l,m){if(!l)throw new Error(m||"Failed assertion")}g._augment=function(l){return l._isBuffer=!0,l._get=l.get,l._set=l.set,l.get=U.get,l.set=U.set,l.write=U.write,l.toString=U.toString,l.toLocaleString=U.toString,l.toJSON=U.toJSON,l.copy=U.copy,l.slice=U.slice,l.readUInt8=U.readUInt8,l.readUInt16LE=U.readUInt16LE,l.readUInt16BE=U.readUInt16BE,l.readUInt32LE=U.readUInt32LE,l.readUInt32BE=U.readUInt32BE,l.readInt8=U.readInt8,l.readInt16LE=U.readInt16LE,l.readInt16BE=U.readInt16BE,l.readInt32LE=U.readInt32LE,l.readInt32BE=U.readInt32BE,l.readFloatLE=U.readFloatLE,l.readFloatBE=U.readFloatBE,l.readDoubleLE=U.readDoubleLE,l.readDoubleBE=U.readDoubleBE,l.writeUInt8=U.writeUInt8,l.writeUInt16LE=U.writeUInt16LE,l.writeUInt16BE=U.writeUInt16BE,l.writeUInt32LE=U.writeUInt32LE,l.writeUInt32BE=U.writeUInt32BE,l.writeInt8=U.writeInt8,l.writeInt16LE=U.writeInt16LE,l.writeInt16BE=U.writeInt16BE,l.writeInt32LE=U.writeInt32LE,l.writeInt32BE=U.writeInt32BE,l.writeFloatLE=U.writeFloatLE,l.writeFloatBE=U.writeFloatBE,l.writeDoubleLE=U.writeDoubleLE,l.writeDoubleBE=U.writeDoubleBE,l.fill=U.fill,l.inspect=U.inspect,l.toArrayBuffer=U.toArrayBuffer,l}}).call(this,e("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/buffer/index.js","/node_modules/gulp-browserify/node_modules/buffer")},{"base64-js":2,buffer:3,ieee754:10,lYpoI2:11}],4:[function(e,t,r){(function(a,o,b,u,f,p,h,y,M){var b=e("buffer").Buffer,T=4,g=new b(T);g.fill(0),t.exports={hash:function(P,C,E,R){for(var j=C(function(c,x){c.length%T!=0&&(L=c.length+(T-c.length%T),c=b.concat([c,g],L));for(var L,F=[],k=x?c.readInt32BE:c.readInt32LE,z=0;z<c.length;z+=T)F.push(k.call(c,z));return F}(P=b.isBuffer(P)?P:new b(P),R),8*P.length),C=R,A=new b(E),_=C?A.writeInt32BE:A.writeInt32LE,d=0;d<j.length;d++)_.call(A,j[d],4*d,!0);return A}}}).call(this,e("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/crypto-browserify/helpers.js","/node_modules/gulp-browserify/node_modules/crypto-browserify")},{buffer:3,lYpoI2:11}],5:[function(e,t,r){(function(a,o,b,u,f,p,h,y,M){var b=e("buffer").Buffer,T=e("./sha"),g=e("./sha256"),P=e("./rng"),C={sha1:T,sha256:g,md5:e("./md5")},E=64,R=new b(E);function j(c,x){var L=C[c=c||"sha1"],F=[];return L||A("algorithm:",c,"is not yet supported"),{update:function(k){return b.isBuffer(k)||(k=new b(k)),F.push(k),k.length,this},digest:function(k){var z=b.concat(F),z=x?function(U,K,$){b.isBuffer(K)||(K=new b(K)),b.isBuffer($)||($=new b($)),K.length>E?K=U(K):K.length<E&&(K=b.concat([K,R],E));for(var Z=new b(E),W=new b(E),me=0;me<E;me++)Z[me]=54^K[me],W[me]=92^K[me];return $=U(b.concat([Z,$])),U(b.concat([W,$]))}(L,x,z):L(z);return F=null,k?z.toString(k):z}}}function A(){var c=[].slice.call(arguments).join(" ");throw new Error([c,"we accept pull requests","http://github.com/dominictarr/crypto-browserify"].join(`
`))}R.fill(0),r.createHash=function(c){return j(c)},r.createHmac=j,r.randomBytes=function(c,x){if(!x||!x.call)return new b(P(c));try{x.call(this,void 0,new b(P(c)))}catch(L){x(L)}};var _,d=["createCredentials","createCipher","createCipheriv","createDecipher","createDecipheriv","createSign","createVerify","createDiffieHellman","pbkdf2"],v=function(c){r[c]=function(){A("sorry,",c,"is not implemented yet")}};for(_ in d)v(d[_])}).call(this,e("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/crypto-browserify/index.js","/node_modules/gulp-browserify/node_modules/crypto-browserify")},{"./md5":6,"./rng":7,"./sha":8,"./sha256":9,buffer:3,lYpoI2:11}],6:[function(e,t,r){(function(a,o,i,u,f,p,h,y,M){var b=e("./helpers");function T(A,_){A[_>>5]|=128<<_%32,A[14+(_+64>>>9<<4)]=_;for(var d=1732584193,v=-271733879,c=-1732584194,x=271733878,L=0;L<A.length;L+=16){var F=d,k=v,z=c,U=x,d=P(d,v,c,x,A[L+0],7,-680876936),x=P(x,d,v,c,A[L+1],12,-389564586),c=P(c,x,d,v,A[L+2],17,606105819),v=P(v,c,x,d,A[L+3],22,-1044525330);d=P(d,v,c,x,A[L+4],7,-176418897),x=P(x,d,v,c,A[L+5],12,1200080426),c=P(c,x,d,v,A[L+6],17,-1473231341),v=P(v,c,x,d,A[L+7],22,-45705983),d=P(d,v,c,x,A[L+8],7,1770035416),x=P(x,d,v,c,A[L+9],12,-1958414417),c=P(c,x,d,v,A[L+10],17,-42063),v=P(v,c,x,d,A[L+11],22,-1990404162),d=P(d,v,c,x,A[L+12],7,1804603682),x=P(x,d,v,c,A[L+13],12,-40341101),c=P(c,x,d,v,A[L+14],17,-1502002290),d=C(d,v=P(v,c,x,d,A[L+15],22,1236535329),c,x,A[L+1],5,-165796510),x=C(x,d,v,c,A[L+6],9,-1069501632),c=C(c,x,d,v,A[L+11],14,643717713),v=C(v,c,x,d,A[L+0],20,-373897302),d=C(d,v,c,x,A[L+5],5,-701558691),x=C(x,d,v,c,A[L+10],9,38016083),c=C(c,x,d,v,A[L+15],14,-660478335),v=C(v,c,x,d,A[L+4],20,-405537848),d=C(d,v,c,x,A[L+9],5,568446438),x=C(x,d,v,c,A[L+14],9,-1019803690),c=C(c,x,d,v,A[L+3],14,-187363961),v=C(v,c,x,d,A[L+8],20,1163531501),d=C(d,v,c,x,A[L+13],5,-1444681467),x=C(x,d,v,c,A[L+2],9,-51403784),c=C(c,x,d,v,A[L+7],14,1735328473),d=E(d,v=C(v,c,x,d,A[L+12],20,-1926607734),c,x,A[L+5],4,-378558),x=E(x,d,v,c,A[L+8],11,-2022574463),c=E(c,x,d,v,A[L+11],16,1839030562),v=E(v,c,x,d,A[L+14],23,-35309556),d=E(d,v,c,x,A[L+1],4,-1530992060),x=E(x,d,v,c,A[L+4],11,1272893353),c=E(c,x,d,v,A[L+7],16,-155497632),v=E(v,c,x,d,A[L+10],23,-1094730640),d=E(d,v,c,x,A[L+13],4,681279174),x=E(x,d,v,c,A[L+0],11,-358537222),c=E(c,x,d,v,A[L+3],16,-722521979),v=E(v,c,x,d,A[L+6],23,76029189),d=E(d,v,c,x,A[L+9],4,-640364487),x=E(x,d,v,c,A[L+12],11,-421815835),c=E(c,x,d,v,A[L+15],16,530742520),d=R(d,v=E(v,c,x,d,A[L+2],23,-995338651),c,x,A[L+0],6,-198630844),x=R(x,d,v,c,A[L+7],10,1126891415),c=R(c,x,d,v,A[L+14],15,-1416354905),v=R(v,c,x,d,A[L+5],21,-57434055),d=R(d,v,c,x,A[L+12],6,1700485571),x=R(x,d,v,c,A[L+3],10,-1894986606),c=R(c,x,d,v,A[L+10],15,-1051523),v=R(v,c,x,d,A[L+1],21,-2054922799),d=R(d,v,c,x,A[L+8],6,1873313359),x=R(x,d,v,c,A[L+15],10,-30611744),c=R(c,x,d,v,A[L+6],15,-1560198380),v=R(v,c,x,d,A[L+13],21,1309151649),d=R(d,v,c,x,A[L+4],6,-145523070),x=R(x,d,v,c,A[L+11],10,-1120210379),c=R(c,x,d,v,A[L+2],15,718787259),v=R(v,c,x,d,A[L+9],21,-343485551),d=j(d,F),v=j(v,k),c=j(c,z),x=j(x,U)}return Array(d,v,c,x)}function g(A,_,d,v,c,x){return j((_=j(j(_,A),j(v,x)))<<c|_>>>32-c,d)}function P(A,_,d,v,c,x,L){return g(_&d|~_&v,A,_,c,x,L)}function C(A,_,d,v,c,x,L){return g(_&v|d&~v,A,_,c,x,L)}function E(A,_,d,v,c,x,L){return g(_^d^v,A,_,c,x,L)}function R(A,_,d,v,c,x,L){return g(d^(_|~v),A,_,c,x,L)}function j(A,_){var d=(65535&A)+(65535&_);return(A>>16)+(_>>16)+(d>>16)<<16|65535&d}t.exports=function(A){return b.hash(A,T,16)}}).call(this,e("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/crypto-browserify/md5.js","/node_modules/gulp-browserify/node_modules/crypto-browserify")},{"./helpers":4,buffer:3,lYpoI2:11}],7:[function(e,t,r){(function(a,o,i,u,f,p,h,y,M){t.exports=function(b){for(var T,g=new Array(b),P=0;P<b;P++)!(3&P)&&(T=4294967296*Math.random()),g[P]=T>>>((3&P)<<3)&255;return g}}).call(this,e("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/crypto-browserify/rng.js","/node_modules/gulp-browserify/node_modules/crypto-browserify")},{buffer:3,lYpoI2:11}],8:[function(e,t,r){(function(a,o,i,u,f,p,h,y,M){var b=e("./helpers");function T(C,E){C[E>>5]|=128<<24-E%32,C[15+(E+64>>9<<4)]=E;for(var R,j,A,_=Array(80),d=1732584193,v=-271733879,c=-1732584194,x=271733878,L=-1009589776,F=0;F<C.length;F+=16){for(var k=d,z=v,U=c,K=x,$=L,Z=0;Z<80;Z++){_[Z]=Z<16?C[F+Z]:P(_[Z-3]^_[Z-8]^_[Z-14]^_[Z-16],1);var W=g(g(P(d,5),(W=v,j=c,A=x,(R=Z)<20?W&j|~W&A:!(R<40)&&R<60?W&j|W&A|j&A:W^j^A)),g(g(L,_[Z]),(R=Z)<20?1518500249:R<40?1859775393:R<60?-1894007588:-899497514)),L=x,x=c,c=P(v,30),v=d,d=W}d=g(d,k),v=g(v,z),c=g(c,U),x=g(x,K),L=g(L,$)}return Array(d,v,c,x,L)}function g(C,E){var R=(65535&C)+(65535&E);return(C>>16)+(E>>16)+(R>>16)<<16|65535&R}function P(C,E){return C<<E|C>>>32-E}t.exports=function(C){return b.hash(C,T,20,!0)}}).call(this,e("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/crypto-browserify/sha.js","/node_modules/gulp-browserify/node_modules/crypto-browserify")},{"./helpers":4,buffer:3,lYpoI2:11}],9:[function(e,t,r){(function(a,o,i,u,f,p,h,y,M){function b(E,R){var j=(65535&E)+(65535&R);return(E>>16)+(R>>16)+(j>>16)<<16|65535&j}function T(E,R){var j,A=new Array(1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298),_=new Array(1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225),d=new Array(64);E[R>>5]|=128<<24-R%32,E[15+(R+64>>9<<4)]=R;for(var v,c,x=0;x<E.length;x+=16){for(var L=_[0],F=_[1],k=_[2],z=_[3],U=_[4],K=_[5],$=_[6],Z=_[7],W=0;W<64;W++)d[W]=W<16?E[W+x]:b(b(b((c=d[W-2],P(c,17)^P(c,19)^C(c,10)),d[W-7]),(c=d[W-15],P(c,7)^P(c,18)^C(c,3))),d[W-16]),j=b(b(b(b(Z,P(c=U,6)^P(c,11)^P(c,25)),U&K^~U&$),A[W]),d[W]),v=b(P(v=L,2)^P(v,13)^P(v,22),L&F^L&k^F&k),Z=$,$=K,K=U,U=b(z,j),z=k,k=F,F=L,L=b(j,v);_[0]=b(L,_[0]),_[1]=b(F,_[1]),_[2]=b(k,_[2]),_[3]=b(z,_[3]),_[4]=b(U,_[4]),_[5]=b(K,_[5]),_[6]=b($,_[6]),_[7]=b(Z,_[7])}return _}var g=e("./helpers"),P=function(E,R){return E>>>R|E<<32-R},C=function(E,R){return E>>>R};t.exports=function(E){return g.hash(E,T,32,!0)}}).call(this,e("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/crypto-browserify/sha256.js","/node_modules/gulp-browserify/node_modules/crypto-browserify")},{"./helpers":4,buffer:3,lYpoI2:11}],10:[function(e,t,r){(function(a,o,i,u,f,p,h,y,M){r.read=function(b,T,g,P,x){var E,R,j=8*x-P-1,A=(1<<j)-1,_=A>>1,d=-7,v=g?x-1:0,c=g?-1:1,x=b[T+v];for(v+=c,E=x&(1<<-d)-1,x>>=-d,d+=j;0<d;E=256*E+b[T+v],v+=c,d-=8);for(R=E&(1<<-d)-1,E>>=-d,d+=P;0<d;R=256*R+b[T+v],v+=c,d-=8);if(E===0)E=1-_;else{if(E===A)return R?NaN:1/0*(x?-1:1);R+=Math.pow(2,P),E-=_}return(x?-1:1)*R*Math.pow(2,E-P)},r.write=function(b,T,g,P,C,L){var R,j,A=8*L-C-1,_=(1<<A)-1,d=_>>1,v=C===23?Math.pow(2,-24)-Math.pow(2,-77):0,c=P?0:L-1,x=P?1:-1,L=T<0||T===0&&1/T<0?1:0;for(T=Math.abs(T),isNaN(T)||T===1/0?(j=isNaN(T)?1:0,R=_):(R=Math.floor(Math.log(T)/Math.LN2),T*(P=Math.pow(2,-R))<1&&(R--,P*=2),2<=(T+=1<=R+d?v/P:v*Math.pow(2,1-d))*P&&(R++,P/=2),_<=R+d?(j=0,R=_):1<=R+d?(j=(T*P-1)*Math.pow(2,C),R+=d):(j=T*Math.pow(2,d-1)*Math.pow(2,C),R=0));8<=C;b[g+c]=255&j,c+=x,j/=256,C-=8);for(R=R<<C|j,A+=C;0<A;b[g+c]=255&R,c+=x,R/=256,A-=8);b[g+c-x]|=128*L}}).call(this,e("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/ieee754/index.js","/node_modules/gulp-browserify/node_modules/ieee754")},{buffer:3,lYpoI2:11}],11:[function(e,t,r){(function(a,o,i,u,f,p,h,y,M){var b,T,g;function P(){}(a=t.exports={}).nextTick=(T=typeof window<"u"&&window.setImmediate,g=typeof window<"u"&&window.postMessage&&window.addEventListener,T?function(C){return window.setImmediate(C)}:g?(b=[],window.addEventListener("message",function(C){var E=C.source;E!==window&&E!==null||C.data!=="process-tick"||(C.stopPropagation(),0<b.length&&b.shift()())},!0),function(C){b.push(C),window.postMessage("process-tick","*")}):function(C){setTimeout(C,0)}),a.title="browser",a.browser=!0,a.env={},a.argv=[],a.on=P,a.addListener=P,a.once=P,a.off=P,a.removeListener=P,a.removeAllListeners=P,a.emit=P,a.binding=function(C){throw new Error("process.binding is not supported")},a.cwd=function(){return"/"},a.chdir=function(C){throw new Error("process.chdir is not supported")}}).call(this,e("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/process/browser.js","/node_modules/gulp-browserify/node_modules/process")},{buffer:3,lYpoI2:11}]},{},[1])(1)})})(ai);var ii=["abs","acos","all","any","asin","atan","ceil","clamp","cos","cross","dFdx","dFdy","degrees","distance","dot","equal","exp","exp2","faceforward","floor","fract","gl_BackColor","gl_BackLightModelProduct","gl_BackLightProduct","gl_BackMaterial","gl_BackSecondaryColor","gl_ClipPlane","gl_ClipVertex","gl_Color","gl_DepthRange","gl_DepthRangeParameters","gl_EyePlaneQ","gl_EyePlaneR","gl_EyePlaneS","gl_EyePlaneT","gl_Fog","gl_FogCoord","gl_FogFragCoord","gl_FogParameters","gl_FragColor","gl_FragCoord","gl_FragData","gl_FragDepth","gl_FragDepthEXT","gl_FrontColor","gl_FrontFacing","gl_FrontLightModelProduct","gl_FrontLightProduct","gl_FrontMaterial","gl_FrontSecondaryColor","gl_LightModel","gl_LightModelParameters","gl_LightModelProducts","gl_LightProducts","gl_LightSource","gl_LightSourceParameters","gl_MaterialParameters","gl_MaxClipPlanes","gl_MaxCombinedTextureImageUnits","gl_MaxDrawBuffers","gl_MaxFragmentUniformComponents","gl_MaxLights","gl_MaxTextureCoords","gl_MaxTextureImageUnits","gl_MaxTextureUnits","gl_MaxVaryingFloats","gl_MaxVertexAttribs","gl_MaxVertexTextureImageUnits","gl_MaxVertexUniformComponents","gl_ModelViewMatrix","gl_ModelViewMatrixInverse","gl_ModelViewMatrixInverseTranspose","gl_ModelViewMatrixTranspose","gl_ModelViewProjectionMatrix","gl_ModelViewProjectionMatrixInverse","gl_ModelViewProjectionMatrixInverseTranspose","gl_ModelViewProjectionMatrixTranspose","gl_MultiTexCoord0","gl_MultiTexCoord1","gl_MultiTexCoord2","gl_MultiTexCoord3","gl_MultiTexCoord4","gl_MultiTexCoord5","gl_MultiTexCoord6","gl_MultiTexCoord7","gl_Normal","gl_NormalMatrix","gl_NormalScale","gl_ObjectPlaneQ","gl_ObjectPlaneR","gl_ObjectPlaneS","gl_ObjectPlaneT","gl_Point","gl_PointCoord","gl_PointParameters","gl_PointSize","gl_Position","gl_ProjectionMatrix","gl_ProjectionMatrixInverse","gl_ProjectionMatrixInverseTranspose","gl_ProjectionMatrixTranspose","gl_SecondaryColor","gl_TexCoord","gl_TextureEnvColor","gl_TextureMatrix","gl_TextureMatrixInverse","gl_TextureMatrixInverseTranspose","gl_TextureMatrixTranspose","gl_Vertex","greaterThan","greaterThanEqual","inversesqrt","length","lessThan","lessThanEqual","log","log2","matrixCompMult","max","min","mix","mod","normalize","not","notEqual","pow","radians","reflect","refract","sign","sin","smoothstep","sqrt","step","tan","texture2D","texture2DLod","texture2DProj","texture2DProjLod","textureCube","textureCubeLod","texture2DLodEXT","texture2DProjLodEXT","textureCubeLodEXT","texture2DGradEXT","texture2DProjGradEXT","textureCubeGradEXT"],Wt=ii;Wt=Wt.slice().filter(function(s){return!/^(gl\_|texture)/.test(s)});Wt.concat(["gl_VertexID","gl_InstanceID","gl_Position","gl_PointSize","gl_FragCoord","gl_FrontFacing","gl_FragDepth","gl_PointCoord","gl_MaxVertexAttribs","gl_MaxVertexUniformVectors","gl_MaxVertexOutputVectors","gl_MaxFragmentInputVectors","gl_MaxVertexTextureImageUnits","gl_MaxCombinedTextureImageUnits","gl_MaxTextureImageUnits","gl_MaxFragmentUniformVectors","gl_MaxDrawBuffers","gl_MinProgramTexelOffset","gl_MaxProgramTexelOffset","gl_DepthRangeParameters","gl_DepthRange","trunc","round","roundEven","isnan","isinf","floatBitsToInt","floatBitsToUint","intBitsToFloat","uintBitsToFloat","packSnorm2x16","unpackSnorm2x16","packUnorm2x16","unpackUnorm2x16","packHalf2x16","unpackHalf2x16","outerProduct","transpose","determinant","inverse","texture","textureSize","textureProj","textureLod","textureOffset","texelFetch","texelFetchOffset","textureProjOffset","textureLodOffset","textureProjLod","textureProjLodOffset","textureGrad","textureGradOffset","textureProjGrad","textureProjGradOffset"]);function si(s,n){if(typeof s!="object"||s===null)return s;var e=s[Symbol.toPrimitive];if(e!==void 0){var t=e.call(s,n||"default");if(typeof t!="object")return t;throw new TypeError("@@toPrimitive must return a primitive value.")}return(n==="string"?String:Number)(s)}function li(s){var n=si(s,"string");return typeof n=="symbol"?n:String(n)}function ee(s,n,e){return n=li(n),n in s?Object.defineProperty(s,n,{value:e,enumerable:!0,configurable:!0,writable:!0}):s[n]=e,s}var G={position:"csm_Position",positionRaw:"csm_PositionRaw",pointSize:"csm_PointSize",fragColor:"csm_FragColor",diffuseColor:"csm_DiffuseColor",normal:"csm_Normal",roughness:"csm_Roughness",metalness:"csm_Metalness",emissive:"csm_Emissive",ao:"csm_AO",bump:"csm_Bump",depthAlpha:"csm_DepthAlpha"},ge,He;ge={},ee(ge,"".concat(G.normal),{"#include <beginnormal_vertex>":`
    vec3 objectNormal = `.concat(G.normal,`;
    #ifdef USE_TANGENT
	    vec3 objectTangent = vec3( tangent.xyz );
    #endif
    `)}),ee(ge,"".concat(G.position),{"#include <begin_vertex>":`
    vec3 transformed = `.concat(G.position,`;
  `)}),ee(ge,"".concat(G.positionRaw),{"#include <begin_vertex>":`
    vec4 csm_internal_positionUnprojected = `.concat(G.positionRaw,`;
    mat4x4 csm_internal_unprojectMatrix = projectionMatrix * modelViewMatrix;
    #ifdef USE_INSTANCING
      csm_internal_unprojectMatrix = csm_internal_unprojectMatrix * instanceMatrix;
    #endif
    csm_internal_positionUnprojected = inverse(csm_internal_unprojectMatrix) * csm_internal_positionUnprojected;
    vec3 transformed = csm_internal_positionUnprojected.xyz;
  `)}),ee(ge,"".concat(G.pointSize),{"gl_PointSize = size;":`
    gl_PointSize = `.concat(G.pointSize,`;
    `)}),ee(ge,"".concat(G.diffuseColor),{"#include <color_fragment>":`
    #include <color_fragment>
    diffuseColor = `.concat(G.diffuseColor,`;
  `)}),ee(ge,"".concat(G.fragColor),{"#include <dithering_fragment>":`
    #include <dithering_fragment>
    gl_FragColor  = `.concat(G.fragColor,`;
  `)}),ee(ge,"".concat(G.emissive),{"vec3 totalEmissiveRadiance = emissive;":`
    vec3 totalEmissiveRadiance = `.concat(G.emissive,`;
    `)}),ee(ge,"".concat(G.roughness),{"#include <roughnessmap_fragment>":`
    #include <roughnessmap_fragment>
    roughnessFactor = `.concat(G.roughness,`;
    `)}),ee(ge,"".concat(G.metalness),{"#include <metalnessmap_fragment>":`
    #include <metalnessmap_fragment>
    metalnessFactor = `.concat(G.metalness,`;
    `)}),ee(ge,"".concat(G.ao),{"#include <aomap_fragment>":`
    #include <aomap_fragment>
    reflectedLight.indirectDiffuse *= 1. - `.concat(G.ao,`;
    `)}),ee(ge,"".concat(G.bump),{"#include <normal_fragment_maps>":`
    #include <normal_fragment_maps>

    vec3 csm_internal_orthogonal = `.concat(G.bump," - (dot(").concat(G.bump,`, normal) * normal);
    vec3 csm_internal_projectedbump = mat3(csm_internal_vModelViewMatrix) * csm_internal_orthogonal;
    normal = normalize(normal - csm_internal_projectedbump);
    `)}),ee(ge,"".concat(G.depthAlpha),{"gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );":`
      gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity * `.concat(G.depthAlpha,` );
    `),"gl_FragColor = packDepthToRGBA( fragCoordZ );":`
      gl_FragColor = packDepthToRGBA( fragCoordZ );
      gl_FragColor.a *= `.concat(G.depthAlpha,`;
    `)});He={},ee(He,"".concat(G.position),{"gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );":`
    gl_Position = projectionMatrix * modelViewMatrix * vec4( `.concat(G.position,`, 1.0 );
  `)}),ee(He,"".concat(G.positionRaw),{"gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );":`
    gl_Position = `.concat(G.position,`;
  `)}),ee(He,"".concat(G.diffuseColor),{"gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );":`
    gl_FragColor = `.concat(G.diffuseColor,`;
  `)}),ee(He,"".concat(G.fragColor),{"gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );":`
    gl_FragColor = `.concat(G.fragColor,`;
  `)});var ve;ve={},ee(ve,"".concat(G.position),"*"),ee(ve,"".concat(G.positionRaw),"*"),ee(ve,"".concat(G.normal),"*"),ee(ve,"".concat(G.pointSize),["PointsMaterial"]),ee(ve,"".concat(G.diffuseColor),"*"),ee(ve,"".concat(G.fragColor),"*"),ee(ve,"".concat(G.emissive),["MeshStandardMaterial","MeshPhysicalMaterial"]),ee(ve,"".concat(G.roughness),["MeshStandardMaterial","MeshPhysicalMaterial"]),ee(ve,"".concat(G.metalness),["MeshStandardMaterial","MeshPhysicalMaterial"]),ee(ve,"".concat(G.ao),["MeshStandardMaterial","MeshPhysicalMaterial","MeshBasicMaterial","MeshLambertMaterial","MeshPhongMaterial","MeshToonMaterial"]),ee(ve,"".concat(G.bump),["MeshLambertMaterial","MeshMatcapMaterial","MeshNormalMaterial","MeshPhongMaterial","MeshPhysicalMaterial","MeshStandardMaterial","MeshToonMaterial","ShadowMaterial"]),ee(ve,"".concat(G.depthAlpha),"*");new $t;new q;yt.line={worldUnits:{value:1},linewidth:{value:1},resolution:{value:new ue(1,1)},dashOffset:{value:0},dashScale:{value:1},dashSize:{value:1},gapSize:{value:1}};yr.line={uniforms:Rn.merge([yt.common,yt.fog,yt.line]),vertexShader:`
		#include <common>
		#include <color_pars_vertex>
		#include <fog_pars_vertex>
		#include <logdepthbuf_pars_vertex>
		#include <clipping_planes_pars_vertex>

		uniform float linewidth;
		uniform vec2 resolution;

		attribute vec3 instanceStart;
		attribute vec3 instanceEnd;

		attribute vec3 instanceColorStart;
		attribute vec3 instanceColorEnd;

		#ifdef WORLD_UNITS

			varying vec4 worldPos;
			varying vec3 worldStart;
			varying vec3 worldEnd;

			#ifdef USE_DASH

				varying vec2 vUv;

			#endif

		#else

			varying vec2 vUv;

		#endif

		#ifdef USE_DASH

			uniform float dashScale;
			attribute float instanceDistanceStart;
			attribute float instanceDistanceEnd;
			varying float vLineDistance;

		#endif

		void trimSegment( const in vec4 start, inout vec4 end ) {

			// trim end segment so it terminates between the camera plane and the near plane

			// conservative estimate of the near plane
			float a = projectionMatrix[ 2 ][ 2 ]; // 3nd entry in 3th column
			float b = projectionMatrix[ 3 ][ 2 ]; // 3nd entry in 4th column
			float nearEstimate = - 0.5 * b / a;

			float alpha = ( nearEstimate - start.z ) / ( end.z - start.z );

			end.xyz = mix( start.xyz, end.xyz, alpha );

		}

		void main() {

			#ifdef USE_COLOR

				vColor.xyz = ( position.y < 0.5 ) ? instanceColorStart : instanceColorEnd;

			#endif

			#ifdef USE_DASH

				vLineDistance = ( position.y < 0.5 ) ? dashScale * instanceDistanceStart : dashScale * instanceDistanceEnd;
				vUv = uv;

			#endif

			float aspect = resolution.x / resolution.y;

			// camera space
			vec4 start = modelViewMatrix * vec4( instanceStart, 1.0 );
			vec4 end = modelViewMatrix * vec4( instanceEnd, 1.0 );

			#ifdef WORLD_UNITS

				worldStart = start.xyz;
				worldEnd = end.xyz;

			#else

				vUv = uv;

			#endif

			// special case for perspective projection, and segments that terminate either in, or behind, the camera plane
			// clearly the gpu firmware has a way of addressing this issue when projecting into ndc space
			// but we need to perform ndc-space calculations in the shader, so we must address this issue directly
			// perhaps there is a more elegant solution -- WestLangley

			bool perspective = ( projectionMatrix[ 2 ][ 3 ] == - 1.0 ); // 4th entry in the 3rd column

			if ( perspective ) {

				if ( start.z < 0.0 && end.z >= 0.0 ) {

					trimSegment( start, end );

				} else if ( end.z < 0.0 && start.z >= 0.0 ) {

					trimSegment( end, start );

				}

			}

			// clip space
			vec4 clipStart = projectionMatrix * start;
			vec4 clipEnd = projectionMatrix * end;

			// ndc space
			vec3 ndcStart = clipStart.xyz / clipStart.w;
			vec3 ndcEnd = clipEnd.xyz / clipEnd.w;

			// direction
			vec2 dir = ndcEnd.xy - ndcStart.xy;

			// account for clip-space aspect ratio
			dir.x *= aspect;
			dir = normalize( dir );

			#ifdef WORLD_UNITS

				// get the offset direction as perpendicular to the view vector
				vec3 worldDir = normalize( end.xyz - start.xyz );
				vec3 offset;
				if ( position.y < 0.5 ) {

					offset = normalize( cross( start.xyz, worldDir ) );

				} else {

					offset = normalize( cross( end.xyz, worldDir ) );

				}

				// sign flip
				if ( position.x < 0.0 ) offset *= - 1.0;

				float forwardOffset = dot( worldDir, vec3( 0.0, 0.0, 1.0 ) );

				// don't extend the line if we're rendering dashes because we
				// won't be rendering the endcaps
				#ifndef USE_DASH

					// extend the line bounds to encompass  endcaps
					start.xyz += - worldDir * linewidth * 0.5;
					end.xyz += worldDir * linewidth * 0.5;

					// shift the position of the quad so it hugs the forward edge of the line
					offset.xy -= dir * forwardOffset;
					offset.z += 0.5;

				#endif

				// endcaps
				if ( position.y > 1.0 || position.y < 0.0 ) {

					offset.xy += dir * 2.0 * forwardOffset;

				}

				// adjust for linewidth
				offset *= linewidth * 0.5;

				// set the world position
				worldPos = ( position.y < 0.5 ) ? start : end;
				worldPos.xyz += offset;

				// project the worldpos
				vec4 clip = projectionMatrix * worldPos;

				// shift the depth of the projected points so the line
				// segments overlap neatly
				vec3 clipPose = ( position.y < 0.5 ) ? ndcStart : ndcEnd;
				clip.z = clipPose.z * clip.w;

			#else

				vec2 offset = vec2( dir.y, - dir.x );
				// undo aspect ratio adjustment
				dir.x /= aspect;
				offset.x /= aspect;

				// sign flip
				if ( position.x < 0.0 ) offset *= - 1.0;

				// endcaps
				if ( position.y < 0.0 ) {

					offset += - dir;

				} else if ( position.y > 1.0 ) {

					offset += dir;

				}

				// adjust for linewidth
				offset *= linewidth;

				// adjust for clip-space to screen-space conversion // maybe resolution should be based on viewport ...
				offset /= resolution.y;

				// select end
				vec4 clip = ( position.y < 0.5 ) ? clipStart : clipEnd;

				// back to clip space
				offset *= clip.w;

				clip.xy += offset;

			#endif

			gl_Position = clip;

			vec4 mvPosition = ( position.y < 0.5 ) ? start : end; // this is an approximation

			#include <logdepthbuf_vertex>
			#include <clipping_planes_vertex>
			#include <fog_vertex>

		}
		`,fragmentShader:`
		uniform vec3 diffuse;
		uniform float opacity;
		uniform float linewidth;

		#ifdef USE_DASH

			uniform float dashOffset;
			uniform float dashSize;
			uniform float gapSize;

		#endif

		varying float vLineDistance;

		#ifdef WORLD_UNITS

			varying vec4 worldPos;
			varying vec3 worldStart;
			varying vec3 worldEnd;

			#ifdef USE_DASH

				varying vec2 vUv;

			#endif

		#else

			varying vec2 vUv;

		#endif

		#include <common>
		#include <color_pars_fragment>
		#include <fog_pars_fragment>
		#include <logdepthbuf_pars_fragment>
		#include <clipping_planes_pars_fragment>

		vec2 closestLineToLine(vec3 p1, vec3 p2, vec3 p3, vec3 p4) {

			float mua;
			float mub;

			vec3 p13 = p1 - p3;
			vec3 p43 = p4 - p3;

			vec3 p21 = p2 - p1;

			float d1343 = dot( p13, p43 );
			float d4321 = dot( p43, p21 );
			float d1321 = dot( p13, p21 );
			float d4343 = dot( p43, p43 );
			float d2121 = dot( p21, p21 );

			float denom = d2121 * d4343 - d4321 * d4321;

			float numer = d1343 * d4321 - d1321 * d4343;

			mua = numer / denom;
			mua = clamp( mua, 0.0, 1.0 );
			mub = ( d1343 + d4321 * ( mua ) ) / d4343;
			mub = clamp( mub, 0.0, 1.0 );

			return vec2( mua, mub );

		}

		void main() {

			#include <clipping_planes_fragment>

			#ifdef USE_DASH

				if ( vUv.y < - 1.0 || vUv.y > 1.0 ) discard; // discard endcaps

				if ( mod( vLineDistance + dashOffset, dashSize + gapSize ) > dashSize ) discard; // todo - FIX

			#endif

			float alpha = opacity;

			#ifdef WORLD_UNITS

				// Find the closest points on the view ray and the line segment
				vec3 rayEnd = normalize( worldPos.xyz ) * 1e5;
				vec3 lineDir = worldEnd - worldStart;
				vec2 params = closestLineToLine( worldStart, worldEnd, vec3( 0.0, 0.0, 0.0 ), rayEnd );

				vec3 p1 = worldStart + lineDir * params.x;
				vec3 p2 = rayEnd * params.y;
				vec3 delta = p1 - p2;
				float len = length( delta );
				float norm = len / linewidth;

				#ifndef USE_DASH

					#ifdef USE_ALPHA_TO_COVERAGE

						float dnorm = fwidth( norm );
						alpha = 1.0 - smoothstep( 0.5 - dnorm, 0.5 + dnorm, norm );

					#else

						if ( norm > 0.5 ) {

							discard;

						}

					#endif

				#endif

			#else

				#ifdef USE_ALPHA_TO_COVERAGE

					// artifacts appear on some hardware if a derivative is taken within a conditional
					float a = vUv.x;
					float b = ( vUv.y > 0.0 ) ? vUv.y - 1.0 : vUv.y + 1.0;
					float len2 = a * a + b * b;
					float dlen = fwidth( len2 );

					if ( abs( vUv.y ) > 1.0 ) {

						alpha = 1.0 - smoothstep( 1.0 - dlen, 1.0 + dlen, len2 );

					}

				#else

					if ( abs( vUv.y ) > 1.0 ) {

						float a = vUv.x;
						float b = ( vUv.y > 0.0 ) ? vUv.y - 1.0 : vUv.y + 1.0;
						float len2 = a * a + b * b;

						if ( len2 > 1.0 ) discard;

					}

				#endif

			#endif

			vec4 diffuseColor = vec4( diffuse, alpha );

			#include <logdepthbuf_fragment>
			#include <color_fragment>

			gl_FragColor = vec4( diffuseColor.rgb, alpha );

			#include <tonemapping_fragment>
			#include <colorspace_fragment>
			#include <fog_fragment>
			#include <premultiplied_alpha_fragment>

		}
		`};new q;new q;new at;new at;new at;new q;new Qe;new wr;new q;new $t;new On;new at;class tn extends $e{constructor(){const n=tn.SkyShader,e=new In({name:n.name,uniforms:Rn.clone(n.uniforms),vertexShader:n.vertexShader,fragmentShader:n.fragmentShader,side:Tr,depthWrite:!1});super(new Mr(1,1,1),e),this.isSky=!0}}tn.SkyShader={name:"SkyShader",uniforms:{turbidity:{value:2},rayleigh:{value:1},mieCoefficient:{value:.005},mieDirectionalG:{value:.8},sunPosition:{value:new q},up:{value:new q(0,1,0)}},vertexShader:`
		uniform vec3 sunPosition;
		uniform float rayleigh;
		uniform float turbidity;
		uniform float mieCoefficient;
		uniform vec3 up;

		varying vec3 vWorldPosition;
		varying vec3 vSunDirection;
		varying float vSunfade;
		varying vec3 vBetaR;
		varying vec3 vBetaM;
		varying float vSunE;

		// constants for atmospheric scattering
		const float e = 2.71828182845904523536028747135266249775724709369995957;
		const float pi = 3.141592653589793238462643383279502884197169;

		// wavelength of used primaries, according to preetham
		const vec3 lambda = vec3( 680E-9, 550E-9, 450E-9 );
		// this pre-calcuation replaces older TotalRayleigh(vec3 lambda) function:
		// (8.0 * pow(pi, 3.0) * pow(pow(n, 2.0) - 1.0, 2.0) * (6.0 + 3.0 * pn)) / (3.0 * N * pow(lambda, vec3(4.0)) * (6.0 - 7.0 * pn))
		const vec3 totalRayleigh = vec3( 5.804542996261093E-6, 1.3562911419845635E-5, 3.0265902468824876E-5 );

		// mie stuff
		// K coefficient for the primaries
		const float v = 4.0;
		const vec3 K = vec3( 0.686, 0.678, 0.666 );
		// MieConst = pi * pow( ( 2.0 * pi ) / lambda, vec3( v - 2.0 ) ) * K
		const vec3 MieConst = vec3( 1.8399918514433978E14, 2.7798023919660528E14, 4.0790479543861094E14 );

		// earth shadow hack
		// cutoffAngle = pi / 1.95;
		const float cutoffAngle = 1.6110731556870734;
		const float steepness = 1.5;
		const float EE = 1000.0;

		float sunIntensity( float zenithAngleCos ) {
			zenithAngleCos = clamp( zenithAngleCos, -1.0, 1.0 );
			return EE * max( 0.0, 1.0 - pow( e, -( ( cutoffAngle - acos( zenithAngleCos ) ) / steepness ) ) );
		}

		vec3 totalMie( float T ) {
			float c = ( 0.2 * T ) * 10E-18;
			return 0.434 * c * MieConst;
		}

		void main() {

			vec4 worldPosition = modelMatrix * vec4( position, 1.0 );
			vWorldPosition = worldPosition.xyz;

			gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
			gl_Position.z = gl_Position.w; // set z to camera.far

			vSunDirection = normalize( sunPosition );

			vSunE = sunIntensity( dot( vSunDirection, up ) );

			vSunfade = 1.0 - clamp( 1.0 - exp( ( sunPosition.y / 450000.0 ) ), 0.0, 1.0 );

			float rayleighCoefficient = rayleigh - ( 1.0 * ( 1.0 - vSunfade ) );

			// extinction (absorbtion + out scattering)
			// rayleigh coefficients
			vBetaR = totalRayleigh * rayleighCoefficient;

			// mie coefficients
			vBetaM = totalMie( turbidity ) * mieCoefficient;

		}`,fragmentShader:`
		varying vec3 vWorldPosition;
		varying vec3 vSunDirection;
		varying float vSunfade;
		varying vec3 vBetaR;
		varying vec3 vBetaM;
		varying float vSunE;

		uniform float mieDirectionalG;
		uniform vec3 up;

		// constants for atmospheric scattering
		const float pi = 3.141592653589793238462643383279502884197169;

		const float n = 1.0003; // refractive index of air
		const float N = 2.545E25; // number of molecules per unit volume for air at 288.15K and 1013mb (sea level -45 celsius)

		// optical length at zenith for molecules
		const float rayleighZenithLength = 8.4E3;
		const float mieZenithLength = 1.25E3;
		// 66 arc seconds -> degrees, and the cosine of that
		const float sunAngularDiameterCos = 0.999956676946448443553574619906976478926848692873900859324;

		// 3.0 / ( 16.0 * pi )
		const float THREE_OVER_SIXTEENPI = 0.05968310365946075;
		// 1.0 / ( 4.0 * pi )
		const float ONE_OVER_FOURPI = 0.07957747154594767;

		float rayleighPhase( float cosTheta ) {
			return THREE_OVER_SIXTEENPI * ( 1.0 + pow( cosTheta, 2.0 ) );
		}

		float hgPhase( float cosTheta, float g ) {
			float g2 = pow( g, 2.0 );
			float inverse = 1.0 / pow( 1.0 - 2.0 * g * cosTheta + g2, 1.5 );
			return ONE_OVER_FOURPI * ( ( 1.0 - g2 ) * inverse );
		}

		void main() {

			vec3 direction = normalize( vWorldPosition - cameraPosition );

			// optical length
			// cutoff angle at 90 to avoid singularity in next formula.
			float zenithAngle = acos( max( 0.0, dot( up, direction ) ) );
			float inverse = 1.0 / ( cos( zenithAngle ) + 0.15 * pow( 93.885 - ( ( zenithAngle * 180.0 ) / pi ), -1.253 ) );
			float sR = rayleighZenithLength * inverse;
			float sM = mieZenithLength * inverse;

			// combined extinction factor
			vec3 Fex = exp( -( vBetaR * sR + vBetaM * sM ) );

			// in scattering
			float cosTheta = dot( direction, vSunDirection );

			float rPhase = rayleighPhase( cosTheta * 0.5 + 0.5 );
			vec3 betaRTheta = vBetaR * rPhase;

			float mPhase = hgPhase( cosTheta, mieDirectionalG );
			vec3 betaMTheta = vBetaM * mPhase;

			vec3 Lin = pow( vSunE * ( ( betaRTheta + betaMTheta ) / ( vBetaR + vBetaM ) ) * ( 1.0 - Fex ), vec3( 1.5 ) );
			Lin *= mix( vec3( 1.0 ), pow( vSunE * ( ( betaRTheta + betaMTheta ) / ( vBetaR + vBetaM ) ) * Fex, vec3( 1.0 / 2.0 ) ), clamp( pow( 1.0 - dot( up, vSunDirection ), 5.0 ), 0.0, 1.0 ) );

			// nightsky
			float theta = acos( direction.y ); // elevation --> y-axis, [-pi/2, pi/2]
			float phi = atan( direction.z, direction.x ); // azimuth --> x-axis [-pi/2, pi/2]
			vec2 uv = vec2( phi, theta ) / vec2( 2.0 * pi, pi ) + vec2( 0.5, 0.0 );
			vec3 L0 = vec3( 0.1 ) * Fex;

			// composition + solar disc
			float sundisk = smoothstep( sunAngularDiameterCos, sunAngularDiameterCos + 0.00002, cosTheta );
			L0 += ( vSunE * 19000.0 * Fex ) * sundisk;

			vec3 texColor = ( Lin + L0 ) * 0.04 + vec3( 0.0, 0.0003, 0.00075 );

			vec3 retColor = pow( texColor, vec3( 1.0 / ( 1.2 + ( 1.2 * vSunfade ) ) ) );

			gl_FragColor = vec4( retColor, 1.0 );

			#include <tonemapping_fragment>
			#include <colorspace_fragment>

		}`};var ci={exports:{}};(function(s,n){(function(e,t){s.exports=t()})(oi,function(){var e=function(){function t(M){return o.appendChild(M.dom),M}function r(M){for(var b=0;b<o.children.length;b++)o.children[b].style.display=b===M?"block":"none";a=M}var a=0,o=document.createElement("div");o.style.cssText="position:fixed;top:0;left:0;cursor:pointer;opacity:0.9;z-index:10000",o.addEventListener("click",function(M){M.preventDefault(),r(++a%o.children.length)},!1);var i=(performance||Date).now(),u=i,f=0,p=t(new e.Panel("FPS","#0ff","#002")),h=t(new e.Panel("MS","#0f0","#020"));if(self.performance&&self.performance.memory)var y=t(new e.Panel("MB","#f08","#201"));return r(0),{REVISION:16,dom:o,addPanel:t,showPanel:r,begin:function(){i=(performance||Date).now()},end:function(){f++;var M=(performance||Date).now();if(h.update(M-i,200),M>u+1e3&&(p.update(1e3*f/(M-u),100),u=M,f=0,y)){var b=performance.memory;y.update(b.usedJSHeapSize/1048576,b.jsHeapSizeLimit/1048576)}return M},update:function(){i=this.end()},domElement:o,setMode:r}};return e.Panel=function(t,r,a){var o=1/0,i=0,u=Math.round,f=u(window.devicePixelRatio||1),p=80*f,h=48*f,y=3*f,M=2*f,b=3*f,T=15*f,g=74*f,P=30*f,C=document.createElement("canvas");C.width=p,C.height=h,C.style.cssText="width:80px;height:48px";var E=C.getContext("2d");return E.font="bold "+9*f+"px Helvetica,Arial,sans-serif",E.textBaseline="top",E.fillStyle=a,E.fillRect(0,0,p,h),E.fillStyle=r,E.fillText(t,y,M),E.fillRect(b,T,g,P),E.fillStyle=a,E.globalAlpha=.9,E.fillRect(b,T,g,P),{dom:C,update:function(R,j){o=Math.min(o,R),i=Math.max(i,R),E.fillStyle=a,E.globalAlpha=1,E.fillRect(0,0,p,T),E.fillStyle=r,E.fillText(u(R)+" "+t+" ("+u(o)+"-"+u(i)+")",y,M),E.drawImage(C,b+f,T,g-f,P,b,T,g-f,P),E.fillRect(b+g-f,T,f,P),E.fillStyle=a,E.globalAlpha=.9,E.fillRect(b+g-f,T,f,u((1-R/j)*P))}}},e})})(ci);var ui=`#include <common>

void main() {
  vec2 center = vec2(0., 1.);
  float rotation = 0.0;

  
  
  float size = 0.03;

  vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );
  vec2 scale;
  scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );
  scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );

  bool isPerspective = isPerspectiveMatrix( projectionMatrix );
  if ( isPerspective ) scale *= - mvPosition.z;

  vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale * size;
  vec2 rotatedPosition;
  rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
  rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
  mvPosition.xy += rotatedPosition;

  gl_Position = projectionMatrix * mvPosition;
}`,di=`void main() {
  gl_FragColor = vec4(0.0, 0.0, 0.0, 0.0);
}`;const lt=new q(0,0,0),nn=new q(0,0,0),fi=new q(0,0,0);function Sn(s,n,e){const t=lt.setFromMatrixPosition(s.matrixWorld);t.project(n);const r=e.width/2,a=e.height/2;return[(Number.isNaN(t.x)?0:t.x)*r+r,-(t.y*a)+a]}function hi(s,n){const e=lt.setFromMatrixPosition(s.matrixWorld),t=nn.setFromMatrixPosition(n.matrixWorld),r=e.sub(t),a=n.getWorldDirection(fi);return r.angleTo(a)>Math.PI/2}function pi(s,n,e,t){const r=lt.setFromMatrixPosition(s.matrixWorld),a=r.clone();a.project(n),e.setFromCamera(new ue(a.x,a.y),n);const o=e.intersectObjects(t,!0);if(o.length>0){const i=o[0].distance;return r.distanceTo(e.ray.origin)<i}return!0}function mi(s,n){if(n instanceof De)return n.zoom;if(n instanceof Ee){const e=lt.setFromMatrixPosition(s.matrixWorld),t=nn.setFromMatrixPosition(n.matrixWorld),r=n.fov*Math.PI/180,a=e.distanceTo(t);return 1/(2*Math.tan(r/2)*a)}else return 1}function gi(s,n,e){if(n instanceof Ee||n instanceof De){const t=lt.setFromMatrixPosition(s.matrixWorld),r=nn.setFromMatrixPosition(n.matrixWorld),a=t.distanceTo(r),o=(e[1]-e[0])/(n.far-n.near),i=e[1]-o*n.far;return Math.round(o*a+i)}}const Yt=s=>Math.abs(s)<1e-10?0:s;function or(s,n,e=""){let t="matrix3d(";for(let r=0;r!==16;r++)t+=Yt(n[r]*s.elements[r])+(r!==15?",":")");return e+t}const vi=(s=>n=>or(n,s))([1,-1,1,1,1,-1,1,1,1,-1,1,1,1,-1,1,1]),yi=(s=>(n,e)=>or(n,s(e),"translate(-50%,-50%)"))(s=>[1/s,1/s,1/s,1,-1/s,-1/s,-1/s,-1,1/s,1/s,1/s,1,1,1,1,1]),wi=["geometry","material"];new br;export{Ti as l,Mi as m,Tt as n,Pi as x};
